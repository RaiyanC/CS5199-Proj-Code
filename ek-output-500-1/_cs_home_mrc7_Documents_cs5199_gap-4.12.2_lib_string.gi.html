<!DOCTYPE html><script src="sorttable.js"></script><html>
<head><title>
</title></head>
<body>
<style>
table { border-collapse: collapse }
tr:nth-child(odd)  { background-color: #EEE; }
tr:nth-child(even)  { background-color: #FFF; }
tr:nth-child(odd).exec  { background-color: #0F0; }
tr:nth-child(even).exec  { background-color: #3F3; }
tr:nth-child(odd).missed  { background-color: #F00; }
tr:nth-child(even).missed  { background-color: #F33; }
td, th {
    border: 1px solid #98bf21;
    padding: 3px 7px 2px 7px;
}
th {
    font-size: 1.1em;
    text-align: left;
    padding-top: 5px;
    padding-bottom: 4px;
    background-color: #A7C942;
    color: #ffffff;
}
table.sortable th:not(.sorttable_sorted):not(.sorttable_sorted_reverse):not(.sorttable_nosort):after {
    content: " \25B4\25BE"
}

/* HSV gradient made using http://www.perbang.dk/rgbgradient/ */
td.coverage00 { background-color: #FF0000; }
td.coverage10 { background-color: #F83100; }
td.coverage20 { background-color: #F25F00; }
td.coverage30 { background-color: #EB8B00; }
td.coverage40 { background-color: #E5B500; }
td.coverage50 { background-color: #DFDC00; }
td.coverage60 { background-color: #B0D800; }
td.coverage70 { background-color: #81D200; }
td.coverage80 { background-color: #55CB00; }
td.coverage90 { background-color: #2CC500; }
td.coverage100 { background-color: #04BF00; }
td:nth-child(1) { text-align: right; }
td:nth-child(2) { text-align: right; }
td:nth-child(3) { text-align: right; }
td:nth-child(4) { text-align: right; }
</style><p>This file was read by GAP before profiling was actived, so lines which were not read but not executed are not marked.</p><table class="sortable">
<thead><tr><th>Line</th><th>Execs</th><th>Time</th><th>Time+Childs</th><th>Code</th><th>Called Functions</th><th>Called From</th>
</tr></thead>
<tbody>
<tr class='ignore'><td><a name="line1"></a>1</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line2"></a>2</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line3"></a>3</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;This&nbsp;file&nbsp;is&nbsp;part&nbsp;of&nbsp;GAP,&nbsp;a&nbsp;system&nbsp;for&nbsp;computational&nbsp;discrete&nbsp;algebra.
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line4"></a>4</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;This&nbsp;file's&nbsp;authors&nbsp;include&nbsp;Frank&nbsp;Celler.
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line5"></a>5</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line6"></a>6</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;Copyright&nbsp;of&nbsp;GAP&nbsp;belongs&nbsp;to&nbsp;its&nbsp;developers,&nbsp;whose&nbsp;names&nbsp;are&nbsp;too&nbsp;numerous
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line7"></a>7</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;to&nbsp;list&nbsp;here.&nbsp;Please&nbsp;refer&nbsp;to&nbsp;the&nbsp;COPYRIGHT&nbsp;file&nbsp;for&nbsp;details.
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line8"></a>8</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line9"></a>9</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;SPDX-License-Identifier:&nbsp;GPL-2.0-or-later
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line10"></a>10</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line11"></a>11</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;This&nbsp;file&nbsp;contains&nbsp;functions&nbsp;for&nbsp;strings.
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line12"></a>12</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line13"></a>13</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line14"></a>14</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line15"></a>15</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line16"></a>16</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line17"></a>17</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;IsDigitChar(&lt;c>)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line18"></a>18</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line19"></a>19</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line20"></a>20</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(IsDigitChar,x->x&nbsp;in&nbsp;CHARS_DIGITS);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line21"></a>21</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line22"></a>22</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line23"></a>23</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line24"></a>24</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line25"></a>25</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;IsUpperAlphaChar(&lt;c>)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line26"></a>26</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line27"></a>27</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line28"></a>28</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(IsUpperAlphaChar,x->x&nbsp;in&nbsp;CHARS_UALPHA);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line29"></a>29</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line30"></a>30</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line31"></a>31</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line32"></a>32</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line33"></a>33</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;IsLowerAlphaChar(&lt;c>)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line34"></a>34</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line35"></a>35</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line36"></a>36</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(IsLowerAlphaChar,x->x&nbsp;in&nbsp;CHARS_LALPHA);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line37"></a>37</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line38"></a>38</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line39"></a>39</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line40"></a>40</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line41"></a>41</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;IsAlphaChar(&lt;c>)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line42"></a>42</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line43"></a>43</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(IsAlphaChar,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line44"></a>44</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;x->x&nbsp;in&nbsp;CHARS_LALPHA&nbsp;or&nbsp;x&nbsp;in&nbsp;CHARS_UALPHA);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line45"></a>45</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line46"></a>46</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line47"></a>47</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line48"></a>48</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line49"></a>49</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;DaysInYear(&nbsp;&lt;year>&nbsp;)&nbsp;&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;&nbsp;days&nbsp;in&nbsp;a&nbsp;year,&nbsp;knows&nbsp;leap-years
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line50"></a>50</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line51"></a>51</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(DaysInYear&nbsp;,&nbsp;function&nbsp;(&nbsp;year&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line52"></a>52</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;year&nbsp;mod&nbsp;4&nbsp;in&nbsp;[1,2,3]&nbsp;&nbsp;or&nbsp;year&nbsp;mod&nbsp;400&nbsp;in&nbsp;[100,200,300]&nbsp;&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line53"></a>53</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;365;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line54"></a>54</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line55"></a>55</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;366;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line56"></a>56</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line57"></a>57</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line58"></a>58</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line59"></a>59</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line60"></a>60</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line61"></a>61</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line62"></a>62</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;DaysInMonth(&nbsp;&lt;month>,&nbsp;&lt;year>&nbsp;)&nbsp;&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;days&nbsp;in&nbsp;a&nbsp;month,&nbsp;knows&nbsp;leap-years
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line63"></a>63</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line64"></a>64</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(DaysInMonth&nbsp;,&nbsp;function&nbsp;(&nbsp;month,&nbsp;year&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line65"></a>65</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;month&nbsp;in&nbsp;[&nbsp;1,&nbsp;3,&nbsp;5,&nbsp;7,&nbsp;8,&nbsp;10,&nbsp;12&nbsp;]&nbsp;&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line66"></a>66</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;31;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line67"></a>67</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;month&nbsp;in&nbsp;[&nbsp;4,&nbsp;6,&nbsp;9,&nbsp;11&nbsp;]&nbsp;&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line68"></a>68</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;30;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line69"></a>69</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;month&nbsp;=&nbsp;2&nbsp;and&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line70"></a>70</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(year&nbsp;mod&nbsp;4&nbsp;in&nbsp;[1,2,3]&nbsp;&nbsp;or&nbsp;year&nbsp;mod&nbsp;400&nbsp;in&nbsp;[100,200,300])&nbsp;&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line71"></a>71</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;28;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line72"></a>72</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;month&nbsp;=&nbsp;2&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line73"></a>73</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;29;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line74"></a>74</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line75"></a>75</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;fail;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line76"></a>76</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line77"></a>77</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line78"></a>78</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line79"></a>79</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line80"></a>80</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line81"></a>81</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line82"></a>82</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;DMYDay(&nbsp;&lt;day>&nbsp;)&nbsp;.&nbsp;.&nbsp;.&nbsp;&nbsp;convert&nbsp;days&nbsp;since&nbsp;01-Jan-1970&nbsp;into&nbsp;day-month-year
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line83"></a>83</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line84"></a>84</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(DMYDay&nbsp;,&nbsp;function&nbsp;(&nbsp;day&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line85"></a>85</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;&nbsp;year,&nbsp;month;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line86"></a>86</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;year&nbsp;:=&nbsp;1970;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line87"></a>87</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;DaysInYear(year)&nbsp;&lt;=&nbsp;day&nbsp;&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line88"></a>88</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;day&nbsp;&nbsp;&nbsp;:=&nbsp;day&nbsp;-&nbsp;DaysInYear(year);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line89"></a>89</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;year&nbsp;&nbsp;:=&nbsp;year&nbsp;+&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line90"></a>90</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line91"></a>91</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;day&nbsp;&lt;&nbsp;0&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line92"></a>92</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;year&nbsp;:=&nbsp;year&nbsp;-&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line93"></a>93</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;day&nbsp;:=&nbsp;day&nbsp;+&nbsp;DaysInYear(year);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line94"></a>94</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line95"></a>95</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;month&nbsp;:=&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line96"></a>96</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;DaysInMonth(month,year)&nbsp;&lt;=&nbsp;day&nbsp;&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line97"></a>97</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;day&nbsp;&nbsp;&nbsp;:=&nbsp;day&nbsp;-&nbsp;DaysInMonth(month,year);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line98"></a>98</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;month&nbsp;:=&nbsp;month&nbsp;+&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line99"></a>99</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line100"></a>100</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[&nbsp;day+1,&nbsp;month,&nbsp;year&nbsp;];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line101"></a>101</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line102"></a>102</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line103"></a>103</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line104"></a>104</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line105"></a>105</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line106"></a>106</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;DayDMY(&nbsp;&lt;dmy>&nbsp;)&nbsp;.&nbsp;.&nbsp;.&nbsp;&nbsp;convert&nbsp;day-month-year&nbsp;into&nbsp;days&nbsp;since&nbsp;01-Jan-1970
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line107"></a>107</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line108"></a>108</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(DayDMY&nbsp;,&nbsp;function&nbsp;(&nbsp;dmy&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line109"></a>109</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;&nbsp;year,&nbsp;month,&nbsp;day;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line110"></a>110</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;day&nbsp;&nbsp;&nbsp;:=&nbsp;dmy[1]-1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line111"></a>111</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;month&nbsp;:=&nbsp;dmy[2];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line112"></a>112</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;year&nbsp;&nbsp;:=&nbsp;dmy[3];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line113"></a>113</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;DaysInMonth(month,&nbsp;year)&nbsp;=&nbsp;fail&nbsp;or&nbsp;day&nbsp;&lt;&nbsp;0&nbsp;or&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line114"></a>114</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;day&nbsp;>&nbsp;DaysInMonth(month,&nbsp;year)&nbsp;-&nbsp;1&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line115"></a>115</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;fail;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line116"></a>116</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line117"></a>117</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;1&nbsp;&lt;&nbsp;month&nbsp;&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line118"></a>118</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;month&nbsp;:=&nbsp;month&nbsp;-&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line119"></a>119</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;day&nbsp;&nbsp;&nbsp;:=&nbsp;day&nbsp;+&nbsp;DaysInMonth(&nbsp;month,&nbsp;year&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line120"></a>120</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line121"></a>121</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;1970&nbsp;&lt;&nbsp;year&nbsp;&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line122"></a>122</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;year&nbsp;&nbsp;:=&nbsp;year&nbsp;-&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line123"></a>123</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;day&nbsp;&nbsp;&nbsp;:=&nbsp;day&nbsp;+&nbsp;DaysInYear(&nbsp;year&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line124"></a>124</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line125"></a>125</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;year&nbsp;&lt;&nbsp;1970&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line126"></a>126</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;day&nbsp;:=&nbsp;day&nbsp;-&nbsp;DaysInYear(&nbsp;year&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line127"></a>127</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;year&nbsp;:=&nbsp;year&nbsp;+&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line128"></a>128</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line129"></a>129</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;day;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line130"></a>130</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line131"></a>131</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line132"></a>132</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line133"></a>133</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line134"></a>134</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line135"></a>135</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;WeekDay(&nbsp;&lt;date>&nbsp;)&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;weekday&nbsp;of&nbsp;a&nbsp;date
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line136"></a>136</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line137"></a>137</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(WeekDay&nbsp;,&nbsp;function&nbsp;(&nbsp;date&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line138"></a>138</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;IsList(&nbsp;date&nbsp;)&nbsp;&nbsp;then&nbsp;date&nbsp;:=&nbsp;DayDMY(&nbsp;date&nbsp;);&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line139"></a>139</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;NameWeekDay[&nbsp;(date&nbsp;+&nbsp;3)&nbsp;mod&nbsp;7&nbsp;+&nbsp;1&nbsp;];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line140"></a>140</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line141"></a>141</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line142"></a>142</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line143"></a>143</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line144"></a>144</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;SecondsDMYhms(&nbsp;&lt;DMYhms>&nbsp;)&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;seconds&nbsp;since&nbsp;1/1/1970/0/0/0
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line145"></a>145</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line146"></a>146</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(SecondsDMYhms,&nbsp;function(DMYhms)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line147"></a>147</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;local&nbsp;d,&nbsp;res,&nbsp;s;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line148"></a>148</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;d&nbsp;:=&nbsp;DayDMY(DMYhms{[1..3]});
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line149"></a>149</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;d&nbsp;=&nbsp;fail&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line150"></a>150</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;fail;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line151"></a>151</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line152"></a>152</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;res&nbsp;:=&nbsp;d&nbsp;*&nbsp;24&nbsp;*&nbsp;60^2;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line153"></a>153</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;s&nbsp;:=&nbsp;DMYhms{[4..6]};
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line154"></a>154</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;not&nbsp;(s[1]&nbsp;in&nbsp;[0..23]&nbsp;and&nbsp;s[2]&nbsp;in&nbsp;[0..59]&nbsp;and&nbsp;s[3]&nbsp;in&nbsp;[0..59])&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line155"></a>155</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;fail;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line156"></a>156</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line157"></a>157</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;Add(s,&nbsp;0);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line158"></a>158</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;res&nbsp;+&nbsp;SecHMSM(s)&nbsp;/&nbsp;1000;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line159"></a>159</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line160"></a>160</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line161"></a>161</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line162"></a>162</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line163"></a>163</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;DMYhmsSeconds(&nbsp;&lt;DMYhms>&nbsp;)&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;inverse&nbsp;of&nbsp;SecondsDMYhms
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line164"></a>164</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line165"></a>165</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(DMYhmsSeconds,&nbsp;function(sec)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line166"></a>166</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;local&nbsp;d,&nbsp;DMY;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line167"></a>167</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;d&nbsp;:=&nbsp;sec&nbsp;mod&nbsp;(24&nbsp;*&nbsp;60^2);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line168"></a>168</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;DMY&nbsp;:=&nbsp;DMYDay((sec&nbsp;-&nbsp;d)&nbsp;/&nbsp;(24&nbsp;*&nbsp;60^2));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line169"></a>169</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;Concatenation(DMY,&nbsp;HMSMSec(d&nbsp;*&nbsp;1000){[1..3]});
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line170"></a>170</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line171"></a>171</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line172"></a>172</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line173"></a>173</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line174"></a>174</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;StringDate(&nbsp;&lt;date>&nbsp;)&nbsp;&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;convert&nbsp;date&nbsp;into&nbsp;a&nbsp;readable&nbsp;string
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line175"></a>175</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line176"></a>176</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(StringDate&nbsp;,&nbsp;function&nbsp;(&nbsp;date&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line177"></a>177</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;IsInt(&nbsp;date&nbsp;)&nbsp;&nbsp;then&nbsp;date&nbsp;:=&nbsp;DMYDay(&nbsp;date&nbsp;);&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line178"></a>178</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Concatenation(
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line179"></a>179</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String(date[1],2),&nbsp;"-",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line180"></a>180</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NameMonth[date[2]],&nbsp;"-",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line181"></a>181</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String(date[3],4)&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line182"></a>182</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line183"></a>183</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line184"></a>184</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line185"></a>185</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line186"></a>186</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line187"></a>187</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;HMSMSec(&nbsp;&lt;sec>&nbsp;)&nbsp;&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;convert&nbsp;milliseconds&nbsp;into&nbsp;hour-min-sec-mill
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line188"></a>188</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line189"></a>189</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(HMSMSec&nbsp;,&nbsp;function&nbsp;(&nbsp;sec&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line190"></a>190</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;&nbsp;hour,&nbsp;minute,&nbsp;second,&nbsp;milli;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line191"></a>191</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;hour&nbsp;&nbsp;&nbsp;:=&nbsp;QuoInt(&nbsp;sec,&nbsp;3600000&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line192"></a>192</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;minute&nbsp;:=&nbsp;QuoInt(&nbsp;sec,&nbsp;&nbsp;&nbsp;60000&nbsp;)&nbsp;mod&nbsp;60;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line193"></a>193</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;second&nbsp;:=&nbsp;QuoInt(&nbsp;sec,&nbsp;&nbsp;&nbsp;&nbsp;1000&nbsp;)&nbsp;mod&nbsp;60;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line194"></a>194</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;milli&nbsp;&nbsp;:=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sec&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mod&nbsp;1000;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line195"></a>195</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[&nbsp;hour,&nbsp;minute,&nbsp;second,&nbsp;milli&nbsp;];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line196"></a>196</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line197"></a>197</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line198"></a>198</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line199"></a>199</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line200"></a>200</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line201"></a>201</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;SecHMSM(&nbsp;&lt;hmsm>&nbsp;)&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;convert&nbsp;hour-min-sec-milli&nbsp;into&nbsp;milliseconds
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line202"></a>202</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line203"></a>203</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(SecHMSM&nbsp;,&nbsp;function&nbsp;(&nbsp;hmsm&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line204"></a>204</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[3600000,&nbsp;60000,&nbsp;1000,&nbsp;1]&nbsp;*&nbsp;hmsm;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line205"></a>205</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line206"></a>206</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line207"></a>207</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line208"></a>208</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line209"></a>209</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line210"></a>210</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;StringTime(&nbsp;&lt;time>&nbsp;)&nbsp;&nbsp;.&nbsp;convert&nbsp;hour-min-sec-milli&nbsp;into&nbsp;a&nbsp;readable&nbsp;string
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line211"></a>211</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line212"></a>212</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(StringTime&nbsp;,&nbsp;function&nbsp;(&nbsp;time&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line213"></a>213</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;&nbsp;&nbsp;string;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line214"></a>214</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;IsInt(&nbsp;time&nbsp;)&nbsp;&nbsp;then&nbsp;time&nbsp;:=&nbsp;HMSMSec(&nbsp;time&nbsp;);&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line215"></a>215</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;:=&nbsp;"";
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line216"></a>216</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;time[1]&nbsp;&lt;&nbsp;&nbsp;10&nbsp;&nbsp;then&nbsp;Append(&nbsp;string,&nbsp;"&nbsp;"&nbsp;);&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line217"></a>217</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Append(&nbsp;string,&nbsp;String(time[1])&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line218"></a>218</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Append(&nbsp;string,&nbsp;":"&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line219"></a>219</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;time[2]&nbsp;&lt;&nbsp;&nbsp;10&nbsp;&nbsp;then&nbsp;Append(&nbsp;string,&nbsp;"0"&nbsp;);&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line220"></a>220</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Append(&nbsp;string,&nbsp;String(time[2])&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line221"></a>221</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Append(&nbsp;string,&nbsp;":"&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line222"></a>222</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;time[3]&nbsp;&lt;&nbsp;&nbsp;10&nbsp;&nbsp;then&nbsp;Append(&nbsp;string,&nbsp;"0"&nbsp;);&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line223"></a>223</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Append(&nbsp;string,&nbsp;String(time[3])&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line224"></a>224</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Append(&nbsp;string,&nbsp;"."&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line225"></a>225</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;time[4]&nbsp;&lt;&nbsp;100&nbsp;&nbsp;then&nbsp;Append(&nbsp;string,&nbsp;"0"&nbsp;);&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line226"></a>226</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;time[4]&nbsp;&lt;&nbsp;&nbsp;10&nbsp;&nbsp;then&nbsp;Append(&nbsp;string,&nbsp;"0"&nbsp;);&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line227"></a>227</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Append(&nbsp;string,&nbsp;String(time[4])&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line228"></a>228</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;string;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line229"></a>229</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line230"></a>230</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line231"></a>231</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line232"></a>232</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line233"></a>233</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line234"></a>234</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;StringPP(&nbsp;&lt;int>&nbsp;)&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;P1^E1&nbsp;...&nbsp;Pn^En
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line235"></a>235</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line236"></a>236</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(StringPP,&nbsp;function(&nbsp;n&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line237"></a>237</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;str,&nbsp;facs,&nbsp;i;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line238"></a>238</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line239"></a>239</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;hand&nbsp;special&nbsp;cases&nbsp;(in&nbsp;particular&nbsp;0,&nbsp;1,&nbsp;-1)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line240"></a>240</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;n&nbsp;in&nbsp;[-3..3]&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line241"></a>241</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;String(&nbsp;n&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line242"></a>242</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line243"></a>243</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line244"></a>244</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;n&nbsp;&lt;&nbsp;0&nbsp;&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line245"></a>245</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;:=&nbsp;-n;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line246"></a>246</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str&nbsp;:=&nbsp;"-";
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line247"></a>247</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line248"></a>248</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str&nbsp;:=&nbsp;"";
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line249"></a>249</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line250"></a>250</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line251"></a>251</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;facs&nbsp;:=&nbsp;Collected(&nbsp;Factors(Integers,&nbsp;n&nbsp;)&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line252"></a>252</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;[&nbsp;1&nbsp;..&nbsp;Length(&nbsp;facs&nbsp;)&nbsp;]&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line253"></a>253</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;i&nbsp;>&nbsp;1&nbsp;then&nbsp;Append(&nbsp;str,&nbsp;"*"&nbsp;);&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line254"></a>254</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append(&nbsp;str,&nbsp;String(&nbsp;facs[&nbsp;i&nbsp;][&nbsp;1&nbsp;]&nbsp;)&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line255"></a>255</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;facs[&nbsp;i&nbsp;][&nbsp;2&nbsp;]&nbsp;>&nbsp;1&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line256"></a>256</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append(&nbsp;str,&nbsp;"^"&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line257"></a>257</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append(&nbsp;str,&nbsp;String(&nbsp;facs[&nbsp;i&nbsp;][&nbsp;2&nbsp;]&nbsp;)&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line258"></a>258</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line259"></a>259</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line260"></a>260</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line261"></a>261</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;str;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line262"></a>262</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line263"></a>263</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line264"></a>264</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line265"></a>265</td><td></td><td></td><td></td><td><span><tt>############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line266"></a>266</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line267"></a>267</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;WordAlp(&nbsp;&lt;alpha>,&nbsp;&lt;nr>&nbsp;)&nbsp;&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;&nbsp;&lt;nr>-th&nbsp;word&nbsp;over&nbsp;alphabet&nbsp;&lt;alpha>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line268"></a>268</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line269"></a>269</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;returns&nbsp;&nbsp;a&nbsp;string&nbsp;&nbsp;that&nbsp;&nbsp;is&nbsp;the&nbsp;&lt;nr>-th&nbsp;&nbsp;word&nbsp;&nbsp;over&nbsp;the&nbsp;alphabet&nbsp;&lt;alpha>,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line270"></a>270</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;w.r.&nbsp;&nbsp;to&nbsp;word&nbsp;&nbsp;length&nbsp;&nbsp;&nbsp;and&nbsp;&nbsp;lexicographical&nbsp;order.&nbsp;&nbsp;&nbsp;The&nbsp;&nbsp;empty&nbsp;&nbsp;word&nbsp;is
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line271"></a>271</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;'WordAlp(&nbsp;&lt;alpha>,&nbsp;0&nbsp;)'.
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line272"></a>272</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line273"></a>273</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(WordAlp&nbsp;,&nbsp;function(&nbsp;alpha,&nbsp;nr&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line274"></a>274</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line275"></a>275</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;lalpha,&nbsp;&nbsp;&nbsp;#&nbsp;length&nbsp;of&nbsp;the&nbsp;alphabet
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line276"></a>276</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;word,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;the&nbsp;result
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line277"></a>277</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nrmod;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;position&nbsp;of&nbsp;letter
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line278"></a>278</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line279"></a>279</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;lalpha:=&nbsp;Length(&nbsp;alpha&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line280"></a>280</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;word:=&nbsp;"";
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line281"></a>281</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;nr&nbsp;&lt;>&nbsp;0&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line282"></a>282</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nrmod:=&nbsp;nr&nbsp;mod&nbsp;lalpha;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line283"></a>283</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;nrmod&nbsp;=&nbsp;0&nbsp;then&nbsp;nrmod:=&nbsp;lalpha;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line284"></a>284</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add(&nbsp;word,&nbsp;alpha[&nbsp;nrmod&nbsp;]&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line285"></a>285</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nr:=&nbsp;(&nbsp;nr&nbsp;-&nbsp;nrmod&nbsp;)&nbsp;/&nbsp;lalpha;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line286"></a>286</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line287"></a>287</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Reversed(&nbsp;word&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line288"></a>288</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line289"></a>289</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line290"></a>290</td><td></td><td></td><td></td><td><span><tt>BindGlobal("LOWERCASETRANSTABLE",&nbsp;(function()
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line291"></a>291</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;l;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line292"></a>292</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;l&nbsp;:=&nbsp;List([0..255],&nbsp;CHAR_INT);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line293"></a>293</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;l{1+[65..90]}&nbsp;:=&nbsp;l{1+[97..122]};
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line294"></a>294</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;l{1+[192..214]}&nbsp;:=&nbsp;l{33+[192..214]};
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line295"></a>295</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;l{1+[216..221]}&nbsp;:=&nbsp;l{33+[216..221]};
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line296"></a>296</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;ConvertToStringRep(l);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line297"></a>297</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Immutable(l);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line298"></a>298</td><td></td><td></td><td></td><td><span><tt>end)());
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line299"></a>299</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line300"></a>300</td><td></td><td></td><td></td><td><span><tt>BindGlobal("UPPERCASETRANSTABLE",&nbsp;(function()
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line301"></a>301</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;l;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line302"></a>302</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;l&nbsp;:=&nbsp;List([0..255],&nbsp;CHAR_INT);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line303"></a>303</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;l{1+[97..122]}&nbsp;:=&nbsp;l{1+[65..90]};
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line304"></a>304</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;l{33+[192..214]}&nbsp;:=&nbsp;l{1+[192..214]};
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line305"></a>305</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;l{33+[216..221]}&nbsp;:=&nbsp;l{1+[216..221]};
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line306"></a>306</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;ConvertToStringRep(l);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line307"></a>307</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Immutable(l);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line308"></a>308</td><td></td><td></td><td></td><td><span><tt>end)());
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line309"></a>309</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line310"></a>310</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line311"></a>311</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line312"></a>312</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;LowercaseString(&nbsp;&lt;string>&nbsp;)&nbsp;.&nbsp;.&nbsp;.&nbsp;string&nbsp;consisting&nbsp;of&nbsp;lower&nbsp;case&nbsp;letters
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line313"></a>313</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line314"></a>314</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line315"></a>315</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(LowercaseString&nbsp;,&nbsp;function(&nbsp;str&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line316"></a>316</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;local&nbsp;res;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line317"></a>317</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;#&nbsp;delegate&nbsp;to&nbsp;kernels&nbsp;TranslateString
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line318"></a>318</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;res&nbsp;:=&nbsp;ShallowCopy(str);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line319"></a>319</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;TranslateString(res,&nbsp;LOWERCASETRANSTABLE);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line320"></a>320</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;res;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line321"></a>321</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line322"></a>322</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line323"></a>323</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(LowercaseChar&nbsp;,&nbsp;function(&nbsp;c&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line324"></a>324</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;LOWERCASETRANSTABLE[IntChar(c)+1];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line325"></a>325</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line326"></a>326</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line327"></a>327</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line328"></a>328</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line329"></a>329</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;UppercaseString(&nbsp;&lt;string>&nbsp;)&nbsp;.&nbsp;.&nbsp;.&nbsp;string&nbsp;consisting&nbsp;of&nbsp;upper&nbsp;case&nbsp;letters
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line330"></a>330</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line331"></a>331</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line332"></a>332</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(UppercaseString&nbsp;,&nbsp;function(&nbsp;str&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line333"></a>333</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;local&nbsp;res;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line334"></a>334</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;#&nbsp;delegate&nbsp;to&nbsp;kernels&nbsp;TranslateString
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line335"></a>335</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;res&nbsp;:=&nbsp;ShallowCopy(str);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line336"></a>336</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;TranslateString(res,&nbsp;UPPERCASETRANSTABLE);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line337"></a>337</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;res;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line338"></a>338</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line339"></a>339</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line340"></a>340</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(UppercaseChar&nbsp;,&nbsp;function(&nbsp;c&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line341"></a>341</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;UPPERCASETRANSTABLE[IntChar(c)+1];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line342"></a>342</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line343"></a>343</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line344"></a>344</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line345"></a>345</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line346"></a>346</td><td></td><td></td><td></td><td><span><tt>#M&nbsp;&nbsp;Int(&nbsp;&lt;str>&nbsp;)&nbsp;&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;&nbsp;integer&nbsp;described&nbsp;by&nbsp;&lt;str>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line347"></a>347</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line348"></a>348</td><td></td><td></td><td></td><td><span><tt>InstallMethod(&nbsp;Int,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line349"></a>349</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;"for&nbsp;strings",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line350"></a>350</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;true,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line351"></a>351</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;IsString&nbsp;],
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line352"></a>352</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;0,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line353"></a>353</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;INT_STRING&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line354"></a>354</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line355"></a>355</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line356"></a>356</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line357"></a>357</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line358"></a>358</td><td></td><td></td><td></td><td><span><tt>#M&nbsp;&nbsp;Rat(&nbsp;&lt;str>&nbsp;)&nbsp;&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;rational&nbsp;described&nbsp;by&nbsp;&lt;str>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line359"></a>359</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line360"></a>360</td><td></td><td></td><td></td><td><span><tt>InstallOtherMethod(&nbsp;Rat,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line361"></a>361</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;"for&nbsp;strings",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line362"></a>362</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;true,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line363"></a>363</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;IsString&nbsp;],
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line364"></a>364</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;0,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line365"></a>365</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line366"></a>366</td><td></td><td></td><td></td><td><span><tt>function(&nbsp;string&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line367"></a>367</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;&nbsp;&nbsp;z,&nbsp;&nbsp;m,&nbsp;&nbsp;i,&nbsp;&nbsp;s,&nbsp;&nbsp;n,&nbsp;&nbsp;p,&nbsp;&nbsp;d;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line368"></a>368</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line369"></a>369</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;z&nbsp;:=&nbsp;0;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line370"></a>370</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;m&nbsp;:=&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line371"></a>371</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;:=&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line372"></a>372</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;:=&nbsp;false;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line373"></a>373</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;&nbsp;in&nbsp;[&nbsp;1&nbsp;..&nbsp;Length(string)&nbsp;]&nbsp;&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line374"></a>374</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;i&nbsp;=&nbsp;p&nbsp;and&nbsp;string[i]&nbsp;=&nbsp;'-'&nbsp;&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line375"></a>375</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m&nbsp;:=&nbsp;-1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line376"></a>376</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;Length(string)&nbsp;=&nbsp;1&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line377"></a>377</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;fail;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line378"></a>378</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line379"></a>379</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;string[i]&nbsp;=&nbsp;'/'&nbsp;and&nbsp;IsBound(n)&nbsp;&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line380"></a>380</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;fail;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line381"></a>381</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;string[i]&nbsp;=&nbsp;'/'&nbsp;and&nbsp;not&nbsp;IsBound(n)&nbsp;&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line382"></a>382</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;IsRat(d)&nbsp;&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line383"></a>383</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z&nbsp;:=&nbsp;d&nbsp;*&nbsp;z;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line384"></a>384</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line385"></a>385</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;:=&nbsp;false;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line386"></a>386</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;:=&nbsp;m&nbsp;*&nbsp;z;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line387"></a>387</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m&nbsp;:=&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line388"></a>388</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;:=&nbsp;i+1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line389"></a>389</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z&nbsp;:=&nbsp;0;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line390"></a>390</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;string[i]&nbsp;=&nbsp;'.'&nbsp;and&nbsp;IsRat(d)&nbsp;&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line391"></a>391</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;fail;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line392"></a>392</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;string[i]&nbsp;=&nbsp;'.'&nbsp;and&nbsp;not&nbsp;IsRat(d)&nbsp;&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line393"></a>393</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;:=&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line394"></a>394</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line395"></a>395</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s&nbsp;:=&nbsp;Position(&nbsp;CHARS_DIGITS,&nbsp;string[i]&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line396"></a>396</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;s&nbsp;&lt;>&nbsp;fail&nbsp;&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line397"></a>397</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z&nbsp;:=&nbsp;10&nbsp;*&nbsp;z&nbsp;+&nbsp;(s-1);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line398"></a>398</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line399"></a>399</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;fail;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line400"></a>400</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line401"></a>401</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;IsRat(d)&nbsp;&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line402"></a>402</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;:=&nbsp;d&nbsp;/&nbsp;10;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line403"></a>403</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line404"></a>404</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line405"></a>405</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line406"></a>406</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;IsRat(d)&nbsp;&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line407"></a>407</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z&nbsp;:=&nbsp;d&nbsp;*&nbsp;z;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line408"></a>408</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line409"></a>409</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;IsBound(n)&nbsp;&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line410"></a>410</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m&nbsp;*&nbsp;n&nbsp;/&nbsp;z;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line411"></a>411</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line412"></a>412</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m&nbsp;*&nbsp;z;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line413"></a>413</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line414"></a>414</td><td></td><td></td><td></td><td><span><tt>end&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line415"></a>415</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line416"></a>416</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line417"></a>417</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line418"></a>418</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line419"></a>419</td><td></td><td></td><td></td><td><span><tt>#M&nbsp;&nbsp;ViewObj(&lt;string>)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line420"></a>420</td><td></td><td></td><td></td><td><span><tt>#M&nbsp;&nbsp;ViewObj(&lt;char>)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line421"></a>421</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line422"></a>422</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;The&nbsp;difference&nbsp;&nbsp;to&nbsp;PrintObj&nbsp;is&nbsp;&nbsp;that&nbsp;printable&nbsp;non-ASCII&nbsp;&nbsp;characters&nbsp;are
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line423"></a>423</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;output&nbsp;directly.&nbsp;Use&nbsp;PrintObj&nbsp;to&nbsp;get&nbsp;a&nbsp;result&nbsp;which&nbsp;can&nbsp;be&nbsp;safely&nbsp;reread
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line424"></a>424</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;by&nbsp;GAP&nbsp;or&nbsp;used&nbsp;for&nbsp;cut&nbsp;and&nbsp;paste.
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line425"></a>425</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line426"></a>426</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line427"></a>427</td><td></td><td></td><td></td><td><span><tt>#&nbsp;The&nbsp;first&nbsp;list&nbsp;is&nbsp;sorted&nbsp;and&nbsp;contains&nbsp;special&nbsp;characters.&nbsp;The&nbsp;second&nbsp;list
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line428"></a>428</td><td></td><td></td><td></td><td><span><tt>#&nbsp;contains&nbsp;characters&nbsp;that&nbsp;should&nbsp;instead&nbsp;be&nbsp;printed&nbsp;after&nbsp;a&nbsp;`\'.
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line429"></a>429</td><td></td><td></td><td></td><td><span><tt>BindGlobal("SPECIAL_CHARS_VIEW_STRING",&nbsp;MakeImmutable(
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line430"></a>430</td><td></td><td></td><td></td><td><span><tt>[&nbsp;List(Concatenation([0..31],[34,92],[127..255]),&nbsp;CHAR_INT),&nbsp;[
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line431"></a>431</td><td></td><td></td><td></td><td><span><tt>"\\000",&nbsp;"\\>",&nbsp;"\\&lt;",&nbsp;"\\c",&nbsp;"\\004",&nbsp;"\\005",&nbsp;"\\006",&nbsp;"\\007",&nbsp;"\\b",&nbsp;"\\t",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line432"></a>432</td><td></td><td></td><td></td><td><span><tt>"\\n",&nbsp;"\\013",&nbsp;"\\014",&nbsp;"\\r",&nbsp;"\\016",&nbsp;"\\017",&nbsp;"\\020",&nbsp;"\\021",&nbsp;"\\022",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line433"></a>433</td><td></td><td></td><td></td><td><span><tt>"\\023",&nbsp;"\\024",&nbsp;"\\025",&nbsp;"\\026",&nbsp;"\\027",&nbsp;"\\030",&nbsp;"\\031",&nbsp;"\\032",&nbsp;"\\033",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line434"></a>434</td><td></td><td></td><td></td><td><span><tt>"\\034",&nbsp;"\\035",&nbsp;"\\036",&nbsp;"\\037",&nbsp;"\\\"",&nbsp;"\\\\",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line435"></a>435</td><td></td><td></td><td></td><td><span><tt>"\\177","\\200","\\201","\\202","\\203","\\204","\\205","\\206","\\207",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line436"></a>436</td><td></td><td></td><td></td><td><span><tt>"\\210","\\211","\\212","\\213","\\214","\\215","\\216","\\217","\\220",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line437"></a>437</td><td></td><td></td><td></td><td><span><tt>"\\221","\\222","\\223","\\224","\\225","\\226","\\227","\\230","\\231",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line438"></a>438</td><td></td><td></td><td></td><td><span><tt>"\\232","\\233","\\234","\\235","\\236","\\237","\\240","\\241","\\242",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line439"></a>439</td><td></td><td></td><td></td><td><span><tt>"\\243","\\244","\\245","\\246","\\247","\\250","\\251","\\252","\\253",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line440"></a>440</td><td></td><td></td><td></td><td><span><tt>"\\254","\\255","\\256","\\257","\\260","\\261","\\262","\\263","\\264",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line441"></a>441</td><td></td><td></td><td></td><td><span><tt>"\\265","\\266","\\267","\\270","\\271","\\272","\\273","\\274","\\275",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line442"></a>442</td><td></td><td></td><td></td><td><span><tt>"\\276","\\277","\\300","\\301","\\302","\\303","\\304","\\305","\\306",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line443"></a>443</td><td></td><td></td><td></td><td><span><tt>"\\307","\\310","\\311","\\312","\\313","\\314","\\315","\\316","\\317",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line444"></a>444</td><td></td><td></td><td></td><td><span><tt>"\\320","\\321","\\322","\\323","\\324","\\325","\\326","\\327","\\330",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line445"></a>445</td><td></td><td></td><td></td><td><span><tt>"\\331","\\332","\\333","\\334","\\335","\\336","\\337","\\340","\\341",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line446"></a>446</td><td></td><td></td><td></td><td><span><tt>"\\342","\\343","\\344","\\345","\\346","\\347","\\350","\\351","\\352",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line447"></a>447</td><td></td><td></td><td></td><td><span><tt>"\\353","\\354","\\355","\\356","\\357","\\360","\\361","\\362","\\363",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line448"></a>448</td><td></td><td></td><td></td><td><span><tt>"\\364","\\365","\\366","\\367","\\370","\\371","\\372","\\373","\\374",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line449"></a>449</td><td></td><td></td><td></td><td><span><tt>"\\375","\\376","\\377"&nbsp;]]));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line450"></a>450</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line451"></a>451</td><td></td><td></td><td></td><td><span><tt>InstallMethod(ViewObj,&nbsp;"IsChar",&nbsp;true,&nbsp;[IsChar],&nbsp;0,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line452"></a>452</td><td></td><td></td><td></td><td><span><tt>function(x)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line453"></a>453</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;local&nbsp;pos;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line454"></a>454</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;Print("'");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line455"></a>455</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;pos&nbsp;:=&nbsp;Position(SPECIAL_CHARS_VIEW_STRING[1],&nbsp;x);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line456"></a>456</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;pos&nbsp;&lt;>&nbsp;fail&nbsp;&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line457"></a>457</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Print(&nbsp;SPECIAL_CHARS_VIEW_STRING[2][pos]&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line458"></a>458</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line459"></a>459</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Print(&nbsp;[&nbsp;x&nbsp;]&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line460"></a>460</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line461"></a>461</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;Print("\'");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line462"></a>462</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line463"></a>463</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line464"></a>464</td><td></td><td></td><td></td><td><span><tt>#&nbsp;we&nbsp;overwrite&nbsp;this&nbsp;in&nbsp;GAPDoc&nbsp;such&nbsp;that&nbsp;Unicode&nbsp;can&nbsp;be&nbsp;used&nbsp;depending&nbsp;on&nbsp;string
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line465"></a>465</td><td></td><td></td><td></td><td><span><tt>#&nbsp;and&nbsp;terminal&nbsp;encoding
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line466"></a>466</td><td></td><td></td><td></td><td><span><tt>InstallMethod(ViewObj,&nbsp;"IsString",&nbsp;true,&nbsp;[IsString&nbsp;and&nbsp;IsFinite],0,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line467"></a>467</td><td></td><td></td><td></td><td><span><tt>function(s)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line468"></a>468</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;&nbsp;x,&nbsp;pos;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line469"></a>469</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Print("\"");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line470"></a>470</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;x&nbsp;&nbsp;in&nbsp;s&nbsp;&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line471"></a>471</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos&nbsp;:=&nbsp;Position(SPECIAL_CHARS_VIEW_STRING[1],&nbsp;x);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line472"></a>472</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;pos&nbsp;&lt;>&nbsp;fail&nbsp;&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line473"></a>473</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Print(&nbsp;SPECIAL_CHARS_VIEW_STRING[2][pos]&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line474"></a>474</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line475"></a>475</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Print(&nbsp;[&nbsp;x&nbsp;]&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line476"></a>476</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line477"></a>477</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line478"></a>478</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Print("\"");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line479"></a>479</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line480"></a>480</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line481"></a>481</td><td></td><td></td><td></td><td><span><tt>InstallMethod(ViewObj,"empty&nbsp;strings",true,[IsString&nbsp;and&nbsp;IsEmpty],0,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line482"></a>482</td><td></td><td></td><td></td><td><span><tt>function(e)
</tt></span></td><td><span></span></td><td><span><a href="_cs_home_mrc7_Documents_cs5199_gap-4.12.2_lib_list.gi.html#line3879">/cs/home/mrc7/Documents/cs5199/gap-4.12.2/lib/list.gi:3879</a> </span></td></tr>
<tr class='exec'><td><a name="line483"></a>483</td><td>4</td><td>2</td><td>2</td><td><span><tt>&nbsp;&nbsp;if&nbsp;IsStringRep(e)&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line484"></a>484</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Print("\"\"");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line485"></a>485</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='exec'><td><a name="line486"></a>486</td><td>2</td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Print("[&nbsp;&nbsp;]");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='exec'><td><a name="line487"></a>487</td><td>2</td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line488"></a>488</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line489"></a>489</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line490"></a>490</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line491"></a>491</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line492"></a>492</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line493"></a>493</td><td></td><td></td><td></td><td><span><tt>#M&nbsp;&nbsp;ViewString(&lt;char>)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line494"></a>494</td><td></td><td></td><td></td><td><span><tt>##&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line495"></a>495</td><td></td><td></td><td></td><td><span><tt>InstallMethod(ViewString,&nbsp;"IsChar",&nbsp;true,&nbsp;[IsChar],&nbsp;0,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line496"></a>496</td><td></td><td></td><td></td><td><span><tt>function(s)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line497"></a>497</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;local&nbsp;r;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line498"></a>498</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;r:=[&nbsp;''',&nbsp;s,&nbsp;'''&nbsp;];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line499"></a>499</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;ConvertToStringRep(r);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line500"></a>500</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;r;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line501"></a>501</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line502"></a>502</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line503"></a>503</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line504"></a>504</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line505"></a>505</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line506"></a>506</td><td></td><td></td><td></td><td><span><tt>#M&nbsp;&nbsp;DisplayString(&lt;char>)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line507"></a>507</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line508"></a>508</td><td></td><td></td><td></td><td><span><tt>InstallMethod(DisplayString,&nbsp;"IsChar",&nbsp;true,&nbsp;[IsChar],&nbsp;0,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line509"></a>509</td><td></td><td></td><td></td><td><span><tt>function(s)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line510"></a>510</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;local&nbsp;r;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line511"></a>511</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;r:=[&nbsp;''',&nbsp;s,&nbsp;''',&nbsp;'\n'&nbsp;];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line512"></a>512</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;ConvertToStringRep(r);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line513"></a>513</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;r;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line514"></a>514</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line515"></a>515</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line516"></a>516</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line517"></a>517</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line518"></a>518</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line519"></a>519</td><td></td><td></td><td></td><td><span><tt>#M&nbsp;&nbsp;DisplayString(&lt;list>)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line520"></a>520</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line521"></a>521</td><td></td><td></td><td></td><td><span><tt>InstallMethod(DisplayString,&nbsp;"IsList",&nbsp;true,&nbsp;[IsList&nbsp;and&nbsp;IsFinite],&nbsp;0,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line522"></a>522</td><td></td><td></td><td></td><td><span><tt>function(&nbsp;list&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line523"></a>523</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;Length(list)&nbsp;=&nbsp;0&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line524"></a>524</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;IsEmptyString(&nbsp;list&nbsp;)&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line525"></a>525</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;"\n";
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line526"></a>526</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line527"></a>527</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;"[&nbsp;&nbsp;]\n";
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line528"></a>528</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line529"></a>529</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;elif&nbsp;IsString(&nbsp;list&nbsp;)&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line530"></a>530</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Concatenation(&nbsp;list,&nbsp;"\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line531"></a>531</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line532"></a>532</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;TryNextMethod();
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line533"></a>533</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line534"></a>534</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line535"></a>535</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line536"></a>536</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line537"></a>537</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line538"></a>538</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line539"></a>539</td><td></td><td></td><td></td><td><span><tt>#M&nbsp;&nbsp;SplitString(&nbsp;&lt;string>,&nbsp;&lt;seps>,&nbsp;&lt;wspace>&nbsp;)&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;&nbsp;split&nbsp;a&nbsp;string
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line540"></a>540</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line541"></a>541</td><td></td><td></td><td></td><td><span><tt>InstallMethod(&nbsp;SplitString,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line542"></a>542</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"for&nbsp;three&nbsp;strings",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line543"></a>543</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;true,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line544"></a>544</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;IsString,&nbsp;IsString,&nbsp;IsString&nbsp;],&nbsp;0,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line545"></a>545</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplitStringInternal&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line546"></a>546</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line547"></a>547</td><td></td><td></td><td></td><td><span><tt>InstallMethod(&nbsp;SplitString,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line548"></a>548</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"for&nbsp;a&nbsp;string&nbsp;and&nbsp;two&nbsp;characters",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line549"></a>549</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;true,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line550"></a>550</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;IsString,&nbsp;IsChar,&nbsp;IsChar&nbsp;],&nbsp;0,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line551"></a>551</td><td></td><td></td><td></td><td><span><tt>function(&nbsp;string,&nbsp;d1,&nbsp;d2&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line552"></a>552</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;SplitString(&nbsp;string,&nbsp;[d1],&nbsp;[d2]&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line553"></a>553</td><td></td><td></td><td></td><td><span><tt>end&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line554"></a>554</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line555"></a>555</td><td></td><td></td><td></td><td><span><tt>InstallMethod(&nbsp;SplitString,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line556"></a>556</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"for&nbsp;two&nbsp;strings&nbsp;and&nbsp;a&nbsp;character",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line557"></a>557</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;true,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line558"></a>558</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;IsString,&nbsp;IsString,&nbsp;IsChar&nbsp;],&nbsp;0,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line559"></a>559</td><td></td><td></td><td></td><td><span><tt>function(&nbsp;string,&nbsp;seps,&nbsp;d&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line560"></a>560</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;SplitString(&nbsp;string,&nbsp;seps,&nbsp;[d]&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line561"></a>561</td><td></td><td></td><td></td><td><span><tt>end&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line562"></a>562</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line563"></a>563</td><td></td><td></td><td></td><td><span><tt>InstallMethod(&nbsp;SplitString,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line564"></a>564</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"for&nbsp;a&nbsp;string,&nbsp;a&nbsp;character&nbsp;and&nbsp;a&nbsp;string",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line565"></a>565</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;true,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line566"></a>566</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;IsString,&nbsp;IsChar,&nbsp;IsString&nbsp;],&nbsp;0,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line567"></a>567</td><td></td><td></td><td></td><td><span><tt>function(&nbsp;string,&nbsp;d,&nbsp;wspace&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line568"></a>568</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;SplitString(&nbsp;string,&nbsp;[d],&nbsp;wspace&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line569"></a>569</td><td></td><td></td><td></td><td><span><tt>end&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line570"></a>570</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line571"></a>571</td><td></td><td></td><td></td><td><span><tt>InstallOtherMethod(&nbsp;SplitString,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line572"></a>572</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"for&nbsp;two&nbsp;strings",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line573"></a>573</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;true,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line574"></a>574</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;IsString,&nbsp;IsString&nbsp;],&nbsp;0,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line575"></a>575</td><td></td><td></td><td></td><td><span><tt>function(&nbsp;string,&nbsp;seps&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line576"></a>576</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;SplitString(&nbsp;string,&nbsp;seps,&nbsp;""&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line577"></a>577</td><td></td><td></td><td></td><td><span><tt>end&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line578"></a>578</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line579"></a>579</td><td></td><td></td><td></td><td><span><tt>InstallOtherMethod(&nbsp;SplitString,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line580"></a>580</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"for&nbsp;a&nbsp;string&nbsp;and&nbsp;a&nbsp;character",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line581"></a>581</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;true,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line582"></a>582</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;IsString,&nbsp;IsChar&nbsp;],&nbsp;0,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line583"></a>583</td><td></td><td></td><td></td><td><span><tt>function(&nbsp;string,&nbsp;d&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line584"></a>584</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;SplitString(&nbsp;string,&nbsp;[d],&nbsp;""&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line585"></a>585</td><td></td><td></td><td></td><td><span><tt>end&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line586"></a>586</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line587"></a>587</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line588"></a>588</td><td></td><td></td><td></td><td><span><tt>InstallOtherMethod(PositionSublist,&nbsp;"for&nbsp;two&nbsp;args&nbsp;in&nbsp;IsStringRep",&nbsp;true,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line589"></a>589</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[IS_STRING_REP,&nbsp;IS_STRING_REP],&nbsp;0,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line590"></a>590</td><td></td><td></td><td></td><td><span><tt>function(&nbsp;string,&nbsp;sub&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line591"></a>591</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;POSITION_SUBSTRING(string,&nbsp;sub,&nbsp;0);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line592"></a>592</td><td></td><td></td><td></td><td><span><tt>end&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line593"></a>593</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line594"></a>594</td><td></td><td></td><td></td><td><span><tt>InstallOtherMethod(PositionSublist,&nbsp;"for&nbsp;two&nbsp;args&nbsp;in&nbsp;IsStringRep&nbsp;and&nbsp;offset",&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line595"></a>595</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;true,&nbsp;[IS_STRING_REP,&nbsp;IS_STRING_REP,&nbsp;IsInt],&nbsp;0,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line596"></a>596</td><td></td><td></td><td></td><td><span><tt>function(&nbsp;string,&nbsp;sub,&nbsp;off&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line597"></a>597</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;off&lt;0&nbsp;then&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line598"></a>598</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;off&nbsp;:=&nbsp;0;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line599"></a>599</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line600"></a>600</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;POSITION_SUBSTRING(string,&nbsp;sub,&nbsp;off);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line601"></a>601</td><td></td><td></td><td></td><td><span><tt>end&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line602"></a>602</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line603"></a>603</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line604"></a>604</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line605"></a>605</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;NormalizedWhitespace(&nbsp;&lt;str>&nbsp;)&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;copy&nbsp;of&nbsp;string&nbsp;with&nbsp;normalized
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line606"></a>606</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;white&nbsp;space
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line607"></a>607</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line608"></a>608</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;doesn't&nbsp;work&nbsp;in&nbsp;place&nbsp;like&nbsp;the&nbsp;kernel&nbsp;function&nbsp;`NormalizeWhitespace'
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line609"></a>609</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line610"></a>610</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction("NormalizedWhitespace",&nbsp;function&nbsp;(&nbsp;str&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line611"></a>611</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;&nbsp;res;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line612"></a>612</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;res&nbsp;:=&nbsp;ShallowCopy(&nbsp;str&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line613"></a>613</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;NormalizeWhitespace(&nbsp;res&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line614"></a>614</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;res;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line615"></a>615</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line616"></a>616</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line617"></a>617</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line618"></a>618</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line619"></a>619</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;RemoveCharacters(&nbsp;&lt;string>,&nbsp;&lt;todelete>&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line620"></a>620</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line621"></a>621</td><td></td><td></td><td></td><td><span><tt>#&nbsp;moved&nbsp;into&nbsp;kernels&nbsp;string.c
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line622"></a>622</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;InstallGlobalFunction(&nbsp;"RemoveCharacters",&nbsp;function(&nbsp;string,&nbsp;todelete&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line623"></a>623</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;len,&nbsp;posto,&nbsp;posfrom,&nbsp;i;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line624"></a>624</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line625"></a>625</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;len:=&nbsp;Length(&nbsp;string&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line626"></a>626</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;posto:=&nbsp;0;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line627"></a>627</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;posfrom:=&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line628"></a>628</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;posfrom&nbsp;&lt;=&nbsp;len&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line629"></a>629</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;string[&nbsp;posfrom&nbsp;]&nbsp;in&nbsp;todelete&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line630"></a>630</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;posto:=&nbsp;posto&nbsp;+&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line631"></a>631</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string[&nbsp;posto&nbsp;]:=&nbsp;string[&nbsp;posfrom&nbsp;];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line632"></a>632</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line633"></a>633</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;posfrom:=&nbsp;posfrom&nbsp;+&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line634"></a>634</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line635"></a>635</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;[&nbsp;len,&nbsp;len-1&nbsp;..&nbsp;posto&nbsp;+&nbsp;1&nbsp;]&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line636"></a>636</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unbind(&nbsp;string[i]&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line637"></a>637</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line638"></a>638</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;end&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line639"></a>639</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line640"></a>640</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction("RemoveCharacters",&nbsp;REMOVE_CHARACTERS);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line641"></a>641</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line642"></a>642</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line643"></a>643</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line644"></a>644</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line645"></a>645</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;EvalString(&nbsp;&lt;expr>&nbsp;)&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;evaluate&nbsp;a&nbsp;string&nbsp;expression
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line646"></a>646</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line647"></a>647</td><td></td><td></td><td></td><td><span><tt>_EVALSTRINGTMP&nbsp;:=&nbsp;0;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line648"></a>648</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction("EvalString",&nbsp;function(&nbsp;s&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line649"></a>649</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;local&nbsp;a,&nbsp;f,&nbsp;res;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line650"></a>650</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;a&nbsp;:=&nbsp;"_EVALSTRINGTMP:=";
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line651"></a>651</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;Append(a,&nbsp;s);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line652"></a>652</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;Add(a,&nbsp;';');
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line653"></a>653</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;Unbind(_EVALSTRINGTMP);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line654"></a>654</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;f&nbsp;:=&nbsp;InputTextString(a);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line655"></a>655</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;Read(f);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line656"></a>656</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;not&nbsp;IsBound(_EVALSTRINGTMP)&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line657"></a>657</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Error("Could&nbsp;not&nbsp;evaluate&nbsp;string.\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line658"></a>658</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line659"></a>659</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;res&nbsp;:=&nbsp;_EVALSTRINGTMP;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line660"></a>660</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;Unbind(_EVALSTRINGTMP);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line661"></a>661</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;res;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line662"></a>662</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line663"></a>663</td><td></td><td></td><td></td><td><span><tt>Unbind(_EVALSTRINGTMP);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line664"></a>664</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line665"></a>665</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line666"></a>666</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line667"></a>667</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;JoinStringsWithSeparator(&nbsp;&lt;list>[,&nbsp;&lt;sep>]&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line668"></a>668</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line669"></a>669</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction("JoinStringsWithSeparator",&nbsp;function(&nbsp;arg&nbsp;)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line670"></a>670</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;local&nbsp;str,&nbsp;sep,&nbsp;res,&nbsp;i;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line671"></a>671</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;str&nbsp;:=&nbsp;List(arg[1],&nbsp;String);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line672"></a>672</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;Length(str)&nbsp;=&nbsp;0&nbsp;then&nbsp;return&nbsp;"";&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line673"></a>673</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;Length(arg)&nbsp;>&nbsp;1&nbsp;then&nbsp;sep&nbsp;:=&nbsp;arg[2];&nbsp;else&nbsp;sep&nbsp;:=&nbsp;",";&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line674"></a>674</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;res&nbsp;:=&nbsp;ShallowCopy(str[1]);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line675"></a>675</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;[2&nbsp;..&nbsp;Length(str)]&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line676"></a>676</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Append(res,&nbsp;sep);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line677"></a>677</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Append(res,&nbsp;str[i]);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line678"></a>678</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line679"></a>679</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;res;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line680"></a>680</td><td></td><td></td><td></td><td><span><tt>end&nbsp;);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line681"></a>681</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line682"></a>682</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line683"></a>683</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line684"></a>684</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;Chomp(&nbsp;&lt;str>&nbsp;)&nbsp;.&nbsp;.&nbsp;&nbsp;remove&nbsp;trailing&nbsp;'\n'&nbsp;or&nbsp;"\r\n"&nbsp;from&nbsp;string&nbsp;if&nbsp;present
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line685"></a>685</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line686"></a>686</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(Chomp,&nbsp;function(str)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line687"></a>687</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line688"></a>688</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;IsString(str)&nbsp;and&nbsp;str&nbsp;&lt;>&nbsp;""&nbsp;and&nbsp;str[Length(str)]&nbsp;=&nbsp;'\n'&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line689"></a>689</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;1&nbsp;&lt;&nbsp;Length(str)&nbsp;and&nbsp;str[Length(str)&nbsp;-&nbsp;1]&nbsp;=&nbsp;'\r'&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line690"></a>690</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;str{[1&nbsp;..&nbsp;Length(str)&nbsp;-&nbsp;2]};
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line691"></a>691</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line692"></a>692</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;str{[1&nbsp;..&nbsp;Length(str)&nbsp;-&nbsp;1]};
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line693"></a>693</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line694"></a>694</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;str;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line695"></a>695</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line696"></a>696</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line697"></a>697</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line698"></a>698</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(StartsWith,&nbsp;function(string,&nbsp;prefix)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line699"></a>699</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;Length(prefix)&nbsp;&lt;=&nbsp;Length(string)&nbsp;and
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line700"></a>700</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;string{[1..Length(prefix)]}&nbsp;=&nbsp;prefix;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line701"></a>701</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line702"></a>702</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line703"></a>703</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(EndsWith,&nbsp;function(string,&nbsp;suffix)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line704"></a>704</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;Length(suffix)&nbsp;&lt;=&nbsp;Length(string)&nbsp;and
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line705"></a>705</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;string{[Length(string)-Length(suffix)+1..Length(string)]}&nbsp;=&nbsp;suffix;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line706"></a>706</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line707"></a>707</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line708"></a>708</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line709"></a>709</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line710"></a>710</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line711"></a>711</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;StringFile(&nbsp;&lt;name>&nbsp;)&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;return&nbsp;content&nbsp;of&nbsp;file&nbsp;&lt;name>&nbsp;as&nbsp;string
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line712"></a>712</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;FileString(&nbsp;&lt;name>,&nbsp;&lt;string>[,&nbsp;&lt;append>&nbsp;]&nbsp;)&nbsp;.&nbsp;.&nbsp;write&nbsp;&lt;string>&nbsp;to&nbsp;&lt;name>&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line713"></a>713</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line714"></a>714</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&lt;#GAPDoc&nbsp;Label="StringFile">
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line715"></a>715</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&lt;ManSection&nbsp;>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line716"></a>716</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&lt;Func&nbsp;Arg="filename"&nbsp;Name="StringFile"&nbsp;/>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line717"></a>717</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&lt;Func&nbsp;Arg="filename,&nbsp;str[,&nbsp;append]"&nbsp;Name="FileString"&nbsp;/>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line718"></a>718</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&lt;Description>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line719"></a>719</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;The&nbsp;&nbsp;function&nbsp;&lt;Ref&nbsp;&nbsp;Func="StringFile"&nbsp;/>&nbsp;&nbsp;returns&nbsp;the&nbsp;&nbsp;content&nbsp;of
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line720"></a>720</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;file&nbsp;&nbsp;&lt;A>filename&lt;/A>&nbsp;as&nbsp;&nbsp;a&nbsp;string.&nbsp;&nbsp;This&nbsp;works&nbsp;&nbsp;efficiently&nbsp;with
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line721"></a>721</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;arbitrary&nbsp;(binary&nbsp;or&nbsp;text)&nbsp;files.&nbsp;If&nbsp;something&nbsp;went&nbsp;wrong,&nbsp;&nbsp;&nbsp;this&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line722"></a>722</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;function&nbsp;returns&nbsp;&lt;K>fail&lt;/K>.
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line723"></a>723</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&lt;P/>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line724"></a>724</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line725"></a>725</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;Conversely&nbsp;&nbsp;the&nbsp;function&nbsp;&nbsp;&lt;Ref&nbsp;&nbsp;Func="FileString"&nbsp;&nbsp;/>&nbsp;writes&nbsp;&nbsp;the
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line726"></a>726</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;content&nbsp;of&nbsp;a&nbsp;string&nbsp;&lt;A>str&lt;/A>&nbsp;&nbsp;into&nbsp;the&nbsp;file&nbsp;&lt;A>filename&lt;/A>.&nbsp;If
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line727"></a>727</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;the&nbsp;&nbsp;optional&nbsp;third&nbsp;&nbsp;argument&nbsp;&lt;A>append&lt;/A>&nbsp;&nbsp;is&nbsp;given&nbsp;&nbsp;and&nbsp;equals
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line728"></a>728</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&lt;K>true&lt;/K>&nbsp;then&nbsp;&nbsp;the&nbsp;content&nbsp;&nbsp;of&nbsp;&lt;A>str&lt;/A>&nbsp;&nbsp;is&nbsp;appended&nbsp;&nbsp;to&nbsp;the
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line729"></a>729</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;file.&nbsp;Otherwise&nbsp;&nbsp;previous&nbsp;&nbsp;content&nbsp;&nbsp;of&nbsp;&nbsp;the&nbsp;file&nbsp;is&nbsp;deleted.&nbsp;This&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line730"></a>730</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;function&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;&nbsp;bytes&nbsp;&nbsp;written&nbsp;&nbsp;or&nbsp;&lt;K>fail&lt;/K>&nbsp;if&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line731"></a>731</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;something&nbsp;went&nbsp;wrong.&lt;P/>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line732"></a>732</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line733"></a>733</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;Both&nbsp;functions&nbsp;are&nbsp;quite&nbsp;efficient,&nbsp;even&nbsp;with&nbsp;large&nbsp;files.&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line734"></a>734</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&lt;/Description>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line735"></a>735</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&lt;/ManSection>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line736"></a>736</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&lt;#/GAPDoc>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line737"></a>737</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line738"></a>738</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(StringFile,&nbsp;function(name)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line739"></a>739</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;local&nbsp;&nbsp;&nbsp;f,&nbsp;&nbsp;str;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line740"></a>740</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;f&nbsp;:=&nbsp;InputTextFile(name);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line741"></a>741</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;f=fail&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line742"></a>742</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;fail;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line743"></a>743</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line744"></a>744</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;str&nbsp;:=&nbsp;READ_STRING_FILE(f![1]);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line745"></a>745</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;str&nbsp;=&nbsp;fail&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line746"></a>746</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;CloseStream(f);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line747"></a>747</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Error("in&nbsp;StringFile:&nbsp;",&nbsp;LastSystemError().message,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line748"></a>748</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;(",&nbsp;LastSystemError().number,&nbsp;")\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line749"></a>749</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;fail;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line750"></a>750</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line751"></a>751</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;CloseStream(f);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line752"></a>752</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;str;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line753"></a>753</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line754"></a>754</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line755"></a>755</td><td></td><td></td><td></td><td><span><tt>#&nbsp;arg:&nbsp;filename,&nbsp;string[,&nbsp;append]&nbsp;&nbsp;&nbsp;(default&nbsp;for&nbsp;append&nbsp;is&nbsp;false)&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line756"></a>756</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(FileString,&nbsp;function(arg)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line757"></a>757</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;local&nbsp;&nbsp;&nbsp;name,&nbsp;&nbsp;str,&nbsp;&nbsp;append,&nbsp;&nbsp;out;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line758"></a>758</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;name&nbsp;:=&nbsp;arg[1];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line759"></a>759</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;str&nbsp;:=&nbsp;arg[2];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line760"></a>760</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;Length(arg)>2&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line761"></a>761</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;append&nbsp;:=&nbsp;arg[3];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line762"></a>762</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line763"></a>763</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;append&nbsp;:=&nbsp;false;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line764"></a>764</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line765"></a>765</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;not&nbsp;(IsString(name)&nbsp;and&nbsp;IsString(str)&nbsp;and&nbsp;IsBool(append))&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line766"></a>766</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Error("Usage:&nbsp;FileString(&lt;name>,&nbsp;&lt;str>&nbsp;[,&nbsp;&lt;append>&nbsp;])");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line767"></a>767</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line768"></a>768</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;out&nbsp;:=&nbsp;OutputTextFile(name,&nbsp;append);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line769"></a>769</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;out=fail&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line770"></a>770</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;fail;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line771"></a>771</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line772"></a>772</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;IS_STRING_CONV(str);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line773"></a>773</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;WRITE_STRING_FILE_NC(out![1],&nbsp;str)&nbsp;=&nbsp;fail&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line774"></a>774</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;CloseStream(out);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line775"></a>775</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Error("in&nbsp;FileString:&nbsp;",&nbsp;LastSystemError().message,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line776"></a>776</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;(",&nbsp;LastSystemError().number,&nbsp;")\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line777"></a>777</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;fail;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line778"></a>778</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line779"></a>779</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;CloseStream(out);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line780"></a>780</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;Length(str);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line781"></a>781</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line782"></a>782</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line783"></a>783</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line784"></a>784</td><td></td><td></td><td></td><td><span><tt>BindGlobal("RCSVSplitString",function(s,sep)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line785"></a>785</td><td></td><td></td><td></td><td><span><tt>local&nbsp;l,&nbsp;i,&nbsp;start,nodob,str;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line786"></a>786</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;l:=[];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line787"></a>787</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;i:=1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line788"></a>788</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;while&nbsp;i&lt;=Length(s)&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line789"></a>789</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;s[i]=sep&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line790"></a>790</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add(l,"");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line791"></a>791</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i:=i+1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line792"></a>792</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;s[i]='"'&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line793"></a>793</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;find&nbsp;next&nbsp;",&nbsp;treating&nbsp;""&nbsp;special
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line794"></a>794</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:="";
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line795"></a>795</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start:=i+1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line796"></a>796</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repeat
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line797"></a>797</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(i+1&lt;=Length(s)&nbsp;and&nbsp;s[i+1]&lt;>'"')&nbsp;or
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line798"></a>798</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(i+2=Length(s)&nbsp;and&nbsp;s[i+2]&lt;>sep)&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line799"></a>799</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i:=i+1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line800"></a>800</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line801"></a>801</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;Length(s)>=i+2&nbsp;and&nbsp;s[i+2]='"'&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line802"></a>802</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:=Concatenation(str,s{[start..i+1]});
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line803"></a>803</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i:=i+2;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line804"></a>804</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start:=i+1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line805"></a>805</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nodob:=false;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line806"></a>806</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line807"></a>807</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nodob:=true;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line808"></a>808</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line809"></a>809</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;until&nbsp;nodob;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line810"></a>810</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;Length(str)>0&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line811"></a>811</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add(l,Concatenation(str,s{[start..i]}));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line812"></a>812</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line813"></a>813</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add(l,s{[start..i]});
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line814"></a>814</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line815"></a>815</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i:=i+3;&nbsp;#&nbsp;skip&nbsp;",
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line816"></a>816</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line817"></a>817</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start:=i;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line818"></a>818</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;i&lt;Length(s)&nbsp;and&nbsp;s[i+1]&lt;>sep&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line819"></a>819</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i:=i+1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line820"></a>820</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line821"></a>821</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add(l,s{[start..i]});
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line822"></a>822</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i:=i+2;&nbsp;#&nbsp;skip&nbsp;comma
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line823"></a>823</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line824"></a>824</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line825"></a>825</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;l;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line826"></a>826</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line827"></a>827</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line828"></a>828</td><td></td><td></td><td></td><td><span><tt>BindGlobal("RCSVReadLine",function(f)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line829"></a>829</td><td></td><td></td><td></td><td><span><tt>local&nbsp;l,&nbsp;b;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line830"></a>830</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;l:="";
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line831"></a>831</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;while&nbsp;not&nbsp;IsEndOfStream(f)&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line832"></a>832</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;b:=ReadByte(f);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line833"></a>833</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;b&lt;>fail&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line834"></a>834</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;b&lt;0&nbsp;then&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line835"></a>835</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b:=b+256;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line836"></a>836</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line837"></a>837</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;b=10&nbsp;or&nbsp;b=13&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line838"></a>838</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;l;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line839"></a>839</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line840"></a>840</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add(l,CHAR_INT(b));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line841"></a>841</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line842"></a>842</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line843"></a>843</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;l;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line844"></a>844</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line845"></a>845</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line846"></a>846</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(ReadCSV,function(arg)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line847"></a>847</td><td></td><td></td><td></td><td><span><tt>local&nbsp;nohead,file,sep,f,&nbsp;line,&nbsp;fields,&nbsp;l,&nbsp;r,&nbsp;i,s,t,add,dir;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line848"></a>848</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;file:=arg[1];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line849"></a>849</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line850"></a>850</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;not&nbsp;IsReadableFile(file)&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line851"></a>851</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;i:=file;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line852"></a>852</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;file:=Concatenation(i,".csv");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line853"></a>853</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;IsReadableFile(file)&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line854"></a>854</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file:=Concatenation(i,".xls");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line855"></a>855</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;IsReadableFile(file)&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line856"></a>856</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Error("file&nbsp;",i,"&nbsp;does&nbsp;not&nbsp;exist&nbsp;or&nbsp;is&nbsp;not&nbsp;readable");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line857"></a>857</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line858"></a>858</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line859"></a>859</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line860"></a>860</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line861"></a>861</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;LowercaseString(file{[Length(file)-3..Length(file)]})=".xls"&nbsp;or
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line862"></a>862</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LowercaseString(file{[Length(file)-4..Length(file)]})=".xlsx"&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line863"></a>863</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;dir:=DirectoryTemporary();
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line864"></a>864</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;i:=file;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line865"></a>865</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;file:=Filename(dir,"temp.csv");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line866"></a>866</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Exec(Concatenation("xls2csv&nbsp;-x&nbsp;\"",i,"\"&nbsp;-c&nbsp;\"",file,"\""));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line867"></a>867</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line868"></a>868</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;dir:=fail;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line869"></a>869</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line870"></a>870</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;nohead:=false;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line871"></a>871</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;Length(arg)>1&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line872"></a>872</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;IsBool(arg[2])&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line873"></a>873</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nohead:=arg[2];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line874"></a>874</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line875"></a>875</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;sep:=arg[Length(arg)];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line876"></a>876</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;IsString(sep)&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line877"></a>877</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sep:=sep[1];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line878"></a>878</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;not&nbsp;IsChar(sep)&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line879"></a>879</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sep:=',';
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line880"></a>880</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line881"></a>881</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line882"></a>882</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;sep:=',';
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line883"></a>883</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line884"></a>884</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;f:=InputTextFile(file);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line885"></a>885</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;f=fail&nbsp;then&nbsp;return&nbsp;f;fi;&nbsp;#&nbsp;wrong&nbsp;file
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line886"></a>886</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;nohead&lt;>true&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line887"></a>887</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;line:=RCSVReadLine(f);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line888"></a>888</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;line:=Chomp(line);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line889"></a>889</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;'"'&nbsp;in&nbsp;line&nbsp;and&nbsp;sep=','&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line890"></a>890</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fields:=RCSVSplitString(line,sep);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line891"></a>891</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line892"></a>892</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fields:=SplitString(line,sep);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line893"></a>893</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line894"></a>894</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;field&nbsp;names&nbsp;with&nbsp;blank&nbsp;or&nbsp;empty&nbsp;are&nbsp;awkward
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line895"></a>895</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;[1..Length(fields)]&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line896"></a>896</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;'&nbsp;'&nbsp;in&nbsp;fields[i]&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line897"></a>897</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fields[i]:=ReplacedString(fields[i],"&nbsp;","_");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line898"></a>898</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;Length(fields[i])=0&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line899"></a>899</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fields[i]:=Concatenation("field",String(i));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line900"></a>900</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line901"></a>901</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line902"></a>902</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line903"></a>903</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fields:=List([1..10000],i->Concatenation("field",String(i)));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line904"></a>904</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line905"></a>905</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;l:=[];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line906"></a>906</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;while&nbsp;not&nbsp;IsEndOfStream(f)&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line907"></a>907</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;line:=RCSVReadLine(f);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line908"></a>908</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;line&lt;>fail&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line909"></a>909</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line:=Chomp(line);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line910"></a>910</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;'"'&nbsp;in&nbsp;line&nbsp;and&nbsp;sep=','&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line911"></a>911</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line:=RCSVSplitString(line,sep);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line912"></a>912</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line913"></a>913</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line:=SplitString(line,sep);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line914"></a>914</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line915"></a>915</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r:=rec();
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line916"></a>916</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add:=false;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line917"></a>917</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;[1..Length(fields)]&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line918"></a>918</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;IsBound(line[i])&nbsp;and&nbsp;Length(line[i])>0&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line919"></a>919</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s:=line[i];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line920"></a>920</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;openoffice&nbsp;and&nbsp;Excel&nbsp;translate&nbsp;booleans&nbsp;differently.&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line921"></a>921</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;s="TRUE"&nbsp;then&nbsp;s:="1";
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line922"></a>922</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;s="FALSE"&nbsp;then&nbsp;s:="0";
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line923"></a>923</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line924"></a>924</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t:=Rat(s);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line925"></a>925</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;IsBool(t)&nbsp;and&nbsp;not&nbsp;'.'&nbsp;in&nbsp;s&nbsp;then&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line926"></a>926</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s:=t;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line927"></a>927</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line928"></a>928</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line929"></a>929</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line930"></a>930</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.(fields[i]):=s;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line931"></a>931</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add:=true;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line932"></a>932</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line933"></a>933</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line934"></a>934</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;add&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line935"></a>935</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add(l,r);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line936"></a>936</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line937"></a>937</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line938"></a>938</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line939"></a>939</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;CloseStream(f);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line940"></a>940</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;dir&lt;>fail&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line941"></a>941</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;RemoveFile(file);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line942"></a>942</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line943"></a>943</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;l;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line944"></a>944</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line945"></a>945</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line946"></a>946</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(PrintCSV,function(arg)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line947"></a>947</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;local&nbsp;stream,l,printEntry,&nbsp;rf,&nbsp;r,&nbsp;i,&nbsp;j,&nbsp;oldStreamFormattingStatus,&nbsp;close;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line948"></a>948</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line949"></a>949</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;IsString(arg[1])&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line950"></a>950</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;stream:=OutputTextFile(arg[1],false);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line951"></a>951</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;close:=true;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line952"></a>952</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;elif&nbsp;IsOutputStream(arg[1])&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line953"></a>953</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;stream:=arg[1];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line954"></a>954</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;close:=false;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line955"></a>955</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line956"></a>956</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Error("PrintCSV:&nbsp;filename&nbsp;must&nbsp;be&nbsp;a&nbsp;string&nbsp;or&nbsp;an&nbsp;output&nbsp;stream");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line957"></a>957</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line958"></a>958</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;l:=arg[2];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line959"></a>959</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;printEntry:=function(s)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line960"></a>960</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;local&nbsp;p,q;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line961"></a>961</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;q:=false;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line962"></a>962</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;IsString(s)&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line963"></a>963</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s:=String(s);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line964"></a>964</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;IsString(s)&nbsp;and&nbsp;ForAll(s,x->x&nbsp;in&nbsp;CHARS_DIGITS&nbsp;or&nbsp;x&nbsp;in&nbsp;"+-")&nbsp;and&nbsp;Int(s)&lt;>fail&nbsp;and&nbsp;AbsInt(Int(s))>10^9&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line965"></a>965</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q:=true;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line966"></a>966</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line967"></a>967</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line968"></a>968</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;p:=Position(s,'\n');
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line969"></a>969</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;p&lt;>fail&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line970"></a>970</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s:=Concatenation(s{[1..p-1]},s{[p+1..Length(s)]});
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line971"></a>971</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p:=Position(s,'\n');
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line972"></a>972</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line973"></a>973</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;p:=PositionSublist(s,"&nbsp;&nbsp;");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line974"></a>974</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;p&lt;>fail&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line975"></a>975</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s:=Concatenation(s{[1..p-1]},s{[p+1..Length(s)]});
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line976"></a>976</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p:=PositionSublist(s,"&nbsp;&nbsp;");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line977"></a>977</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line978"></a>978</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line979"></a>979</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;'"'&nbsp;in&nbsp;s&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line980"></a>980</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p:=1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line981"></a>981</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;p&lt;=Length(s)&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line982"></a>982</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;s[p]='"'&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line983"></a>983</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s:=Concatenation(s{[1..p]},s{[p..Length(s)]});
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line984"></a>984</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p:=p+1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line985"></a>985</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line986"></a>986</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p:=p+1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line987"></a>987</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line988"></a>988</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line989"></a>989</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line990"></a>990</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;','&nbsp;in&nbsp;s&nbsp;or&nbsp;'"'&nbsp;in&nbsp;s&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line991"></a>991</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s:=Concatenation("\"",s,"\"");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line992"></a>992</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;q=true&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line993"></a>993</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;integers&nbsp;as&nbsp;string
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line994"></a>994</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s:=Concatenation("\"_",s,"\"");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line995"></a>995</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line996"></a>996</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(stream,s,"\c");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line997"></a>997</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;end;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line998"></a>998</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line999"></a>999</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;oldStreamFormattingStatus:=PrintFormattingStatus(stream);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1000"></a>1000</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;SetPrintFormattingStatus(stream,false);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1001"></a>1001</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;Length(arg)>2&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1002"></a>1002</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;rf:=arg[3];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1003"></a>1003</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1004"></a>1004</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;rf:=[];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1005"></a>1005</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;l&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1006"></a>1006</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r:=RecNames(i);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1007"></a>1007</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;j&nbsp;in&nbsp;r&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1008"></a>1008</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;j&nbsp;in&nbsp;rf&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1009"></a>1009</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add(rf,j);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1010"></a>1010</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1011"></a>1011</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1012"></a>1012</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1013"></a>1013</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;sort&nbsp;record&nbsp;fields
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1014"></a>1014</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Sort(rf,function(a,b)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1015"></a>1015</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;ap;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1016"></a>1016</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;check&nbsp;trailing&nbsp;numbers
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1017"></a>1017</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ap:=Length(a);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1018"></a>1018</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;ap>0&nbsp;and&nbsp;a[ap]&nbsp;in&nbsp;CHARS_DIGITS&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1019"></a>1019</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ap:=ap-1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1020"></a>1020</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1021"></a>1021</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;Length(b)>=ap&nbsp;and&nbsp;ForAll([ap+1..Length(b)],j->b[j]&nbsp;in&nbsp;CHARS_DIGITS)&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1022"></a>1022</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Int(a{[ap+1..Length(a)]})&lt;Int(b{[ap+1..Length(b)]});
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1023"></a>1023</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1024"></a>1024</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;a&lt;b;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1025"></a>1025</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1026"></a>1026</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1027"></a>1027</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1028"></a>1028</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;PrintTo(stream);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1029"></a>1029</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1030"></a>1030</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;ValueOption("noheader")&lt;>true&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1031"></a>1031</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;printEntry(rf[1]);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1032"></a>1032</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;j&nbsp;in&nbsp;[2..Length(rf)]&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1033"></a>1033</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(stream,",");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1034"></a>1034</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printEntry(ReplacedString(rf[j],"_","&nbsp;"));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1035"></a>1035</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1036"></a>1036</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(stream,"\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1037"></a>1037</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1038"></a>1038</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1039"></a>1039</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;for&nbsp;&nbsp;i&nbsp;in&nbsp;l&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1040"></a>1040</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;j&nbsp;in&nbsp;[1..Length(rf)]&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1041"></a>1041</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;j>1&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1042"></a>1042</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(stream,",");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1043"></a>1043</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1044"></a>1044</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;IsBound(i.(rf[j]))&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1045"></a>1045</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printEntry(i.(rf[j]));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1046"></a>1046</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1047"></a>1047</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1048"></a>1048</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(stream,"\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1049"></a>1049</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1050"></a>1050</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;SetPrintFormattingStatus(stream,oldStreamFormattingStatus);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1051"></a>1051</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;close&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1052"></a>1052</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;CloseStream(stream);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1053"></a>1053</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1054"></a>1054</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1055"></a>1055</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1056"></a>1056</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1057"></a>1057</td><td></td><td></td><td></td><td><span><tt>#&nbsp;Format&nbsp;commands
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1058"></a>1058</td><td></td><td></td><td></td><td><span><tt>#&nbsp;RLC:&nbsp;alignment
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1059"></a>1059</td><td></td><td></td><td></td><td><span><tt>#&nbsp;M:&nbsp;Math&nbsp;mode
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1060"></a>1060</td><td></td><td></td><td></td><td><span><tt>#&nbsp;MN:&nbsp;Math&nbsp;mode&nbsp;but&nbsp;names,&nbsp;characters&nbsp;are&nbsp;put&nbsp;into&nbsp;mbox
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1061"></a>1061</td><td></td><td></td><td></td><td><span><tt>#&nbsp;F:&nbsp;Number&nbsp;displayed&nbsp;in&nbsp;factored&nbsp;form
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1062"></a>1062</td><td></td><td></td><td></td><td><span><tt>#&nbsp;P:&nbsp;Minipage&nbsp;environment&nbsp;(25mm&nbsp;per&nbsp;default)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1063"></a>1063</td><td></td><td></td><td></td><td><span><tt>#&nbsp;B:&nbsp;Background&nbsp;color
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1064"></a>1064</td><td></td><td></td><td></td><td><span><tt>#&nbsp;option&nbsp;`rows'&nbsp;colors&nbsp;alternating&nbsp;rows
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1065"></a>1065</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(LaTeXTable,function(file,l)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1066"></a>1066</td><td></td><td></td><td></td><td><span><tt>local&nbsp;f,i,j,format,cold,a,e,z,str,new,box,lc,mini,color,alt,renum;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1067"></a>1067</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1068"></a>1068</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;alt:=ValueOption("rows")&lt;>fail;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1069"></a>1069</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;color:=fail;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1070"></a>1070</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;#&nbsp;row&nbsp;1&nbsp;indicates&nbsp;which&nbsp;columns&nbsp;are&nbsp;relevant&nbsp;and&nbsp;their&nbsp;formatting
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1071"></a>1071</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;cold:=ShallowCopy(l[1]);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1072"></a>1072</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;f:=RecNames(cold);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1073"></a>1073</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;renum:=[];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1074"></a>1074</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;ShallowCopy(f)&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1075"></a>1075</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1076"></a>1076</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;a:=Filtered(cold.(i),x->x&nbsp;in&nbsp;CHARS_DIGITS);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1077"></a>1077</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;LENGTH(a)>0&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1078"></a>1078</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cold.(i):=Filtered(cold.(i),x->not&nbsp;x&nbsp;in&nbsp;CHARS_DIGITS);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1079"></a>1079</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add(renum,Int(a));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1080"></a>1080</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1081"></a>1081</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1082"></a>1082</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;cold.(i)="B"&nbsp;then&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1083"></a>1083</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;color&nbsp;indicator
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1084"></a>1084</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:=i;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1085"></a>1085</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unbind(cold.(i));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1086"></a>1086</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f:=Difference(f,[i]);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1087"></a>1087</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1088"></a>1088</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cold.(i):=UppercaseString(cold.(i));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1089"></a>1089</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1090"></a>1090</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1091"></a>1091</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1092"></a>1092</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;#&nbsp;resort&nbsp;columns&nbsp;if&nbsp;numbers&nbsp;are&nbsp;given
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1093"></a>1093</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;Length(renum)=Length(f)&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1094"></a>1094</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;a:=ShallowCopy(renum);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1095"></a>1095</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;a:=Sortex(a);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1096"></a>1096</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;f:=Permuted(f,a);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1097"></a>1097</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1098"></a>1098</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1099"></a>1099</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1100"></a>1100</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;PrintTo(file);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1101"></a>1101</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;#&nbsp;header
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1102"></a>1102</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;format:="";
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1103"></a>1103</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;[1..Length(f)]&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1104"></a>1104</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;i>1&nbsp;then&nbsp;Append(format,"|");fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1105"></a>1105</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;'R'&nbsp;in&nbsp;cold.(f[i])&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1106"></a>1106</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add(format,'r');
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1107"></a>1107</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;'C'&nbsp;in&nbsp;cold.(f[i])&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1108"></a>1108</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add(format,'c');
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1109"></a>1109</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1110"></a>1110</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add(format,'l');
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1111"></a>1111</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1112"></a>1112</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1113"></a>1113</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1114"></a>1114</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;#&nbsp;header
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1115"></a>1115</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;AppendTo(file,"\\begin{tabular}{",format,"}\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1116"></a>1116</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;[1..Length(f)]&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1117"></a>1117</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;i>1&nbsp;then&nbsp;AppendTo(file,"&amp;");fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1118"></a>1118</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(file,l[2].(f[i]),"\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1119"></a>1119</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1120"></a>1120</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;AppendTo(file,"\\\\\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1121"></a>1121</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;AppendTo(file,"\\hline\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1122"></a>1122</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1123"></a>1123</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;#entries
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1124"></a>1124</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;for&nbsp;j&nbsp;in&nbsp;[3..Length(l)]&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1125"></a>1125</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;color&lt;>fail&nbsp;and&nbsp;IsBound(l[j].(color))&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1126"></a>1126</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(file,"\\rowcolor{",l[j].(color),"}%\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1127"></a>1127</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;alt&nbsp;and&nbsp;IsEvenInt(j)&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1128"></a>1128</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;light&nbsp;grey&nbsp;color
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1129"></a>1129</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(file,"\\rowcolor{lgrey}%\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1130"></a>1130</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1131"></a>1131</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;[1..Length(f)]&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1132"></a>1132</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;i>1&nbsp;then&nbsp;AppendTo(file,"&amp;");fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1133"></a>1133</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;IsBound(l[j].(f[i]))&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1134"></a>1134</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:=l[j].(f[i]);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1135"></a>1135</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;fix&nbsp;_integer&nbsp;to&nbsp;keep&nbsp;long&nbsp;integers&nbsp;from&nbsp;Excel
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1136"></a>1136</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;IsList(str)&nbsp;and&nbsp;Length(str)>0&nbsp;and&nbsp;str[1]='_'&nbsp;and
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1137"></a>1137</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Int(str{[2..Length(str)]})&lt;>fail&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1138"></a>1138</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:=str{[2..Length(str)]};
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1139"></a>1139</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1140"></a>1140</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1141"></a>1141</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;'P'&nbsp;in&nbsp;cold.(f[i])&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1142"></a>1142</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mini:=true;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1143"></a>1143</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(file,"\\begin{minipage}{25mm}%\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1144"></a>1144</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1145"></a>1145</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mini:=false;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1146"></a>1146</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1147"></a>1147</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;'F'&nbsp;in&nbsp;cold.(f[i])&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1148"></a>1148</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;IsInt(str)&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1149"></a>1149</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a:=str;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1150"></a>1150</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1151"></a>1151</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;transform&nbsp;str&nbsp;in&nbsp;normal&nbsp;format
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1152"></a>1152</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:=Filtered(str,x->x&lt;>',');
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1153"></a>1153</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z:=0;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1154"></a>1154</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a:=Position(str,'E');
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1155"></a>1155</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;a&lt;>fail&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1156"></a>1156</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z:=Int(Filtered(str{[a+1..Length(str)]},x->x&lt;>'+'));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1157"></a>1157</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:=str{[1..a-1]};
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1158"></a>1158</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1159"></a>1159</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a:=Position(str,'.');
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1160"></a>1160</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;a&lt;>fail&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1161"></a>1161</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z:=z-(Length(str)-a);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1162"></a>1162</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str:=Filtered(str,x->x&lt;>'.');
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1163"></a>1163</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1164"></a>1164</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1165"></a>1165</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a:=Int(str)*10^z;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1166"></a>1166</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1167"></a>1167</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1168"></a>1168</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a:=Collected(Factors(a));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1169"></a>1169</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(file,"$");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1170"></a>1170</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;z&nbsp;in&nbsp;[1..Length(a)]&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1171"></a>1171</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;z>1&nbsp;and&nbsp;e=false&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1172"></a>1172</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(file,"\n{\\cdot}");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1173"></a>1173</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1174"></a>1174</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(file,a[z][1]);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1175"></a>1175</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;a[z][2]>1&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1176"></a>1176</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(file,"^{",a[z][2],"}");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1177"></a>1177</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e:=true;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1178"></a>1178</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1179"></a>1179</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e:=false;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1180"></a>1180</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1181"></a>1181</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1182"></a>1182</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(file,"$\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1183"></a>1183</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;'M'&nbsp;in&nbsp;cold.(f[i])&nbsp;and&nbsp;'N'&nbsp;in&nbsp;cold.(f[i])&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1184"></a>1184</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;make&nbsp;strings&nbsp;``names''&nbsp;in&nbsp;mbox
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1185"></a>1185</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new:="";
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1186"></a>1186</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;box:=false;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1187"></a>1187</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lc:=false;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1188"></a>1188</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;a&nbsp;in&nbsp;str&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1189"></a>1189</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z:=a&nbsp;in&nbsp;CHARS_UALPHA&nbsp;or&nbsp;a&nbsp;in&nbsp;CHARS_LALPHA;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1190"></a>1190</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;z&nbsp;and&nbsp;box=false&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1191"></a>1191</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;lc='\\'&nbsp;then&nbsp;#&nbsp;actual&nbsp;command
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1192"></a>1192</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;box:=fail;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1193"></a>1193</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1194"></a>1194</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append(new,"\\mbox{");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1195"></a>1195</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;box:=true;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1196"></a>1196</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1197"></a>1197</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;box=true&nbsp;and&nbsp;not&nbsp;z&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1198"></a>1198</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append(new,"}");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1199"></a>1199</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;box:=false;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1200"></a>1200</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;box=fail&nbsp;and&nbsp;not&nbsp;z&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1201"></a>1201</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;box:=false;&nbsp;#&nbsp;command&nbsp;over
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1202"></a>1202</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1203"></a>1203</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add(new,a);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1204"></a>1204</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lc:=a;&nbsp;#&nbsp;last&nbsp;character
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1205"></a>1205</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1206"></a>1206</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;box=true&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1207"></a>1207</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append(new,"}");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1208"></a>1208</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1209"></a>1209</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(file,"$",new,"$\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1210"></a>1210</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1211"></a>1211</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;'M'&nbsp;in&nbsp;cold.(f[i])&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1212"></a>1212</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(file,"$",str,"$\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1213"></a>1213</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1214"></a>1214</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(file,str,"\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1215"></a>1215</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1216"></a>1216</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;mini&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1217"></a>1217</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(file,"\\end{minipage}%\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1218"></a>1218</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1219"></a>1219</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1220"></a>1220</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1221"></a>1221</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(file,"\\\\\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1222"></a>1222</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1223"></a>1223</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1224"></a>1224</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;AppendTo(file,"\\end{tabular}\n");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1225"></a>1225</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1226"></a>1226</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1227"></a>1227</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1228"></a>1228</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1229"></a>1229</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1230"></a>1230</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;&nbsp;Convenience&nbsp;method&nbsp;to&nbsp;inform&nbsp;users&nbsp;how&nbsp;to&nbsp;concatenate&nbsp;strings.
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1231"></a>1231</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1232"></a>1232</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;Note&nbsp;that&nbsp;we&nbsp;could&nbsp;also&nbsp;have&nbsp;this&nbsp;method&nbsp;do&nbsp;the&nbsp;following
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1233"></a>1233</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Concatenation(a,b);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1234"></a>1234</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;instead&nbsp;of&nbsp;raising&nbsp;an&nbsp;error.&nbsp;But&nbsp;this&nbsp;leads&nbsp;to&nbsp;inefficient&nbsp;code&nbsp;when
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1235"></a>1235</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;concatenating&nbsp;many&nbsp;strings.&nbsp;So&nbsp;in&nbsp;order&nbsp;to&nbsp;not&nbsp;encourage&nbsp;such&nbsp;bad&nbsp;code,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1236"></a>1236</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;we&nbsp;instead&nbsp;tell&nbsp;the&nbsp;user&nbsp;the&nbsp;proper&nbsp;way&nbsp;to&nbsp;do&nbsp;this.
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1237"></a>1237</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1238"></a>1238</td><td></td><td></td><td></td><td><span><tt>InstallOtherMethod(\+,&nbsp;[IsString,IsString],
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1239"></a>1239</td><td></td><td></td><td></td><td><span><tt>function(a,b)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1240"></a>1240</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Error("concatenating&nbsp;strings&nbsp;via&nbsp;+&nbsp;is&nbsp;not&nbsp;supported,&nbsp;use&nbsp;Concatenation(&lt;a>,&lt;b>)&nbsp;instead");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1241"></a>1241</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1242"></a>1242</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1243"></a>1243</td><td></td><td></td><td></td><td><span><tt>#############################################################################
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1244"></a>1244</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1245"></a>1245</td><td></td><td></td><td></td><td><span><tt>#F&nbsp;StringOfMemoryAmount(&nbsp;&lt;m>&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;returns&nbsp;an&nbsp;appropriate&nbsp;human-readable&nbsp;string&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1246"></a>1246</td><td></td><td></td><td></td><td><span><tt>##&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;representation&nbsp;of&nbsp;&lt;m>&nbsp;bytes
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1247"></a>1247</td><td></td><td></td><td></td><td><span><tt>##
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1248"></a>1248</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1249"></a>1249</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(StringOfMemoryAmount,&nbsp;function(m)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1250"></a>1250</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;&nbsp;whole,&nbsp;frac,&nbsp;shift,&nbsp;s,&nbsp;units;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1251"></a>1251</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;IsInt(m)&nbsp;or&nbsp;m&nbsp;&lt;&nbsp;0&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1252"></a>1252</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Error("StringOfMemoryAmount:&nbsp;amount&nbsp;must&nbsp;be&nbsp;a&nbsp;non-negative&nbsp;integer&nbsp;number&nbsp;of&nbsp;bytes");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1253"></a>1253</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1254"></a>1254</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;whole&nbsp;:=&nbsp;m;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1255"></a>1255</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;frac&nbsp;:=&nbsp;0;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1256"></a>1256</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;shift&nbsp;:=&nbsp;0;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1257"></a>1257</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;whole&nbsp;>=&nbsp;1024&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1258"></a>1258</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;frac&nbsp;:=&nbsp;whole&nbsp;mod&nbsp;1024;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1259"></a>1259</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;whole&nbsp;:=&nbsp;Int(whole&nbsp;/&nbsp;1024);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1260"></a>1260</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shift&nbsp;:=&nbsp;shift+1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1261"></a>1261</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1262"></a>1262</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;s&nbsp;:=&nbsp;ShallowCopy(String(whole));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1263"></a>1263</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;whole&nbsp;&lt;&nbsp;100&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1264"></a>1264</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append(s,".");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1265"></a>1265</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append(s,String(Int(frac*10/1024)));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1266"></a>1266</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;whole&nbsp;&lt;&nbsp;10&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1267"></a>1267</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append(s,&nbsp;String(Int(frac*100/1024)&nbsp;mod&nbsp;10));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1268"></a>1268</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1269"></a>1269</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1270"></a>1270</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;units&nbsp;:=&nbsp;["B","KB","MB","GB","TB","PB","EB","YB","ZB"];&nbsp;&nbsp;&nbsp;&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1271"></a>1271</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Append(s,&nbsp;units[shift+1]);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1272"></a>1272</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;s;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1273"></a>1273</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1274"></a>1274</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1275"></a>1275</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(PrintToFormatted,&nbsp;function(stream,&nbsp;s,&nbsp;data...)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1276"></a>1276</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;pos,&nbsp;len,&nbsp;outstr,&nbsp;nextbrace,&nbsp;endbrace,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1277"></a>1277</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;argcounter,&nbsp;var,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1278"></a>1278</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splitReplacementField,&nbsp;toprint,&nbsp;namedIdUsed;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1279"></a>1279</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1280"></a>1280</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Set&nbsp;to&nbsp;true&nbsp;if&nbsp;we&nbsp;ever&nbsp;use&nbsp;a&nbsp;named&nbsp;id&nbsp;in&nbsp;a&nbsp;replacement&nbsp;field
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1281"></a>1281</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;namedIdUsed&nbsp;:=&nbsp;false;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1282"></a>1282</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1283"></a>1283</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Split&nbsp;a&nbsp;replacement&nbsp;field&nbsp;{..}&nbsp;at&nbsp;[startpos..endpos]
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1284"></a>1284</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;splitReplacementField&nbsp;:=&nbsp;function(startpos,&nbsp;endpos)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1285"></a>1285</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;posbang,&nbsp;format;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1286"></a>1286</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;posbang&nbsp;:=&nbsp;Position(s,&nbsp;'!',&nbsp;startpos-1);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1287"></a>1287</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;posbang&nbsp;=&nbsp;fail&nbsp;or&nbsp;posbang&nbsp;>&nbsp;endpos&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1288"></a>1288</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;posbang&nbsp;:=&nbsp;endpos&nbsp;+&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1289"></a>1289</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1290"></a>1290</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;format&nbsp;:=&nbsp;s{[posbang&nbsp;+&nbsp;1&nbsp;..&nbsp;endpos]};
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1291"></a>1291</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;If&nbsp;no&nbsp;format,&nbsp;default&nbsp;to&nbsp;"s"
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1292"></a>1292</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;format&nbsp;=&nbsp;""&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1293"></a>1293</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;format&nbsp;:=&nbsp;"s";
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1294"></a>1294</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1295"></a>1295</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;rec(id&nbsp;:=&nbsp;s{[startpos..posbang-1]},&nbsp;format&nbsp;:=&nbsp;format);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1296"></a>1296</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;end;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1297"></a>1297</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1298"></a>1298</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;argcounter&nbsp;:=&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1299"></a>1299</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;len&nbsp;:=&nbsp;Length(s);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1300"></a>1300</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;pos&nbsp;:=&nbsp;0;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1301"></a>1301</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1302"></a>1302</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;(IsOutputStream(stream)&nbsp;or&nbsp;IsString(stream))&nbsp;or&nbsp;not&nbsp;IsString(s)&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1303"></a>1303</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ErrorNoReturn("Usage:&nbsp;PrintToFormatted(&lt;stream>,&nbsp;&lt;string>,&nbsp;&lt;data>...)");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1304"></a>1304</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1305"></a>1305</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1306"></a>1306</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;pos&nbsp;&lt;&nbsp;len&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1307"></a>1307</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextbrace&nbsp;:=&nbsp;Position(s,&nbsp;'{',&nbsp;pos);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1308"></a>1308</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endbrace&nbsp;:=&nbsp;Position(s,&nbsp;'}',&nbsp;pos);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1309"></a>1309</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Scan&nbsp;until&nbsp;we&nbsp;find&nbsp;an&nbsp;'{'.
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1310"></a>1310</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Produce&nbsp;an&nbsp;error&nbsp;if&nbsp;we&nbsp;find&nbsp;'}',&nbsp;unless&nbsp;it&nbsp;is&nbsp;part&nbsp;of&nbsp;'}}'.
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1311"></a>1311</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;IsInt(endbrace)&nbsp;and&nbsp;(nextbrace&nbsp;=&nbsp;fail&nbsp;or&nbsp;endbrace&nbsp;&lt;&nbsp;nextbrace)&nbsp;do
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1312"></a>1312</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;endbrace&nbsp;+&nbsp;1&nbsp;&lt;=&nbsp;len&nbsp;and&nbsp;s[endbrace&nbsp;+&nbsp;1]&nbsp;=&nbsp;'}'&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1313"></a>1313</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Found&nbsp;}}&nbsp;with&nbsp;no&nbsp;{&nbsp;before&nbsp;it,&nbsp;insert&nbsp;everything&nbsp;up&nbsp;to
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1314"></a>1314</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;including&nbsp;the&nbsp;first&nbsp;},&nbsp;skipping&nbsp;the&nbsp;second.
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1315"></a>1315</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(stream,&nbsp;s{[pos+1..endbrace]});
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1316"></a>1316</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos&nbsp;:=&nbsp;endbrace&nbsp;+&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1317"></a>1317</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endbrace&nbsp;:=&nbsp;Position(s,&nbsp;'}',&nbsp;pos);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1318"></a>1318</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1319"></a>1319</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ErrorNoReturn("Mismatched&nbsp;'}'&nbsp;at&nbsp;position&nbsp;",endbrace);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1320"></a>1320</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1321"></a>1321</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1322"></a>1322</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1323"></a>1323</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;nextbrace&nbsp;=&nbsp;fail&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1324"></a>1324</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;In&nbsp;this&nbsp;case,&nbsp;endbrace&nbsp;=&nbsp;fail,&nbsp;or&nbsp;we&nbsp;would&nbsp;not&nbsp;have&nbsp;left
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1325"></a>1325</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;previous&nbsp;while&nbsp;loop
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1326"></a>1326</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(stream,&nbsp;s{[pos+1..len]});
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1327"></a>1327</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1328"></a>1328</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1329"></a>1329</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1330"></a>1330</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(stream,&nbsp;s{[pos+1..nextbrace-1]});
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1331"></a>1331</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1332"></a>1332</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;If&nbsp;this&nbsp;is&nbsp;{{,&nbsp;then&nbsp;print&nbsp;a&nbsp;{&nbsp;and&nbsp;call&nbsp;'continue'
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1333"></a>1333</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;nextbrace+1&nbsp;&lt;=&nbsp;len&nbsp;and&nbsp;s[nextbrace+1]&nbsp;=&nbsp;'{'&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1334"></a>1334</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(stream,&nbsp;"{");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1335"></a>1335</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos&nbsp;:=&nbsp;nextbrace&nbsp;+&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1336"></a>1336</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1337"></a>1337</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1338"></a>1338</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1339"></a>1339</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;endbrace&nbsp;=&nbsp;fail&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1340"></a>1340</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ErrorNoReturn("Invalid&nbsp;format&nbsp;string,&nbsp;no&nbsp;matching&nbsp;'}'&nbsp;at&nbsp;position&nbsp;",&nbsp;nextbrace);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1341"></a>1341</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1342"></a>1342</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1343"></a>1343</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;toprint&nbsp;:=&nbsp;splitReplacementField(nextbrace+1,endbrace-1);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1344"></a>1344</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1345"></a>1345</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Check&nbsp;if&nbsp;we&nbsp;are&nbsp;mixing&nbsp;giving&nbsp;id,&nbsp;and&nbsp;not&nbsp;giving&nbsp;id.
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1346"></a>1346</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(argcounter&nbsp;>&nbsp;1&nbsp;and&nbsp;toprint.id&nbsp;&lt;>&nbsp;"")&nbsp;or&nbsp;(namedIdUsed&nbsp;and&nbsp;toprint.id&nbsp;=&nbsp;"")&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1347"></a>1347</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ErrorNoReturn("replacement&nbsp;field&nbsp;must&nbsp;either&nbsp;all&nbsp;have&nbsp;an&nbsp;id,&nbsp;or&nbsp;all&nbsp;have&nbsp;no&nbsp;id");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1348"></a>1348</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1349"></a>1349</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1350"></a>1350</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;toprint.id&nbsp;=&nbsp;""&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1351"></a>1351</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;Length(data)&nbsp;&lt;&nbsp;argcounter&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1352"></a>1352</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ErrorNoReturn("out&nbsp;of&nbsp;bounds&nbsp;--&nbsp;used&nbsp;",argcounter,"&nbsp;replacement&nbsp;fields&nbsp;without&nbsp;id&nbsp;when&nbsp;there&nbsp;are&nbsp;only&nbsp;",Length(data),&nbsp;"&nbsp;arguments");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1353"></a>1353</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1354"></a>1354</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;:=&nbsp;data[argcounter];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1355"></a>1355</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;argcounter&nbsp;:=&nbsp;argcounter&nbsp;+&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1356"></a>1356</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;Int(toprint.id)&nbsp;&lt;>&nbsp;fail&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1357"></a>1357</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namedIdUsed&nbsp;:=&nbsp;true;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1358"></a>1358</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;Int(toprint.id)&nbsp;&lt;&nbsp;1&nbsp;or&nbsp;Int(toprint.id)&nbsp;>&nbsp;Length(data)&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1359"></a>1359</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ErrorNoReturn("out&nbsp;of&nbsp;bounds&nbsp;--&nbsp;asked&nbsp;for&nbsp;{",Int(toprint.id),"}&nbsp;when&nbsp;there&nbsp;are&nbsp;only&nbsp;",Length(data),&nbsp;"&nbsp;arguments");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1360"></a>1360</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1361"></a>1361</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;:=&nbsp;data[Int(toprint.id)];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1362"></a>1362</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1363"></a>1363</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namedIdUsed&nbsp;:=&nbsp;true;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1364"></a>1364</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;IsRecord(data[1])&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1365"></a>1365</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ErrorNoReturn("first&nbsp;data&nbsp;argument&nbsp;must&nbsp;be&nbsp;a&nbsp;record&nbsp;when&nbsp;using&nbsp;{",toprint.id,"}");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1366"></a>1366</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1367"></a>1367</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;IsBound(data[1].(toprint.id))&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1368"></a>1368</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ErrorNoReturn("no&nbsp;record&nbsp;member&nbsp;'",toprint.id,"'");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1369"></a>1369</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1370"></a>1370</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;:=&nbsp;data[1].(toprint.id);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1371"></a>1371</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1372"></a>1372</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos&nbsp;:=&nbsp;endbrace;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1373"></a>1373</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1374"></a>1374</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;toprint.format&nbsp;=&nbsp;"s"&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1375"></a>1375</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;IsString(var)&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1376"></a>1376</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;:=&nbsp;String(var);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1377"></a>1377</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1378"></a>1378</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(stream,&nbsp;var);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1379"></a>1379</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;toprint.format&nbsp;=&nbsp;"v"&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1380"></a>1380</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(stream,&nbsp;ViewString(var));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1381"></a>1381</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;toprint.format&nbsp;=&nbsp;"d"&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1382"></a>1382</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AppendTo(stream,&nbsp;DisplayString(var));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1383"></a>1383</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;ErrorNoReturn("Invalid&nbsp;format:&nbsp;'",&nbsp;toprint.format,&nbsp;"'");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1384"></a>1384</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1385"></a>1385</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;od;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1386"></a>1386</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1387"></a>1387</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1388"></a>1388</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(StringFormatted,&nbsp;function(s,&nbsp;data...)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1389"></a>1389</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;str,&nbsp;stream;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1390"></a>1390</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;IsString(s)&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1391"></a>1391</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ErrorNoReturn("Usage:&nbsp;StringFormatted(&lt;string>,&nbsp;&lt;data>...)");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1392"></a>1392</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1393"></a>1393</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;str&nbsp;:=&nbsp;"";
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1394"></a>1394</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;stream&nbsp;:=&nbsp;OutputTextString(str,&nbsp;false);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1395"></a>1395</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;SetPrintFormattingStatus(stream,&nbsp;false);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1396"></a>1396</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1397"></a>1397</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;CallFuncList(PrintToFormatted,&nbsp;Concatenation([stream,&nbsp;s],&nbsp;data));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1398"></a>1398</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;str;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1399"></a>1399</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1400"></a>1400</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1401"></a>1401</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(PrintFormatted,&nbsp;function(args...)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1402"></a>1402</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Do&nbsp;some&nbsp;very&nbsp;baic&nbsp;argument&nbsp;checking
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1403"></a>1403</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;(Length(args)&nbsp;>&nbsp;1&nbsp;and&nbsp;IsString(args[1]))&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1404"></a>1404</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ErrorNoReturn("Usage:&nbsp;PrintFormatted(&lt;string>,&nbsp;&lt;data>...)");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1405"></a>1405</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1406"></a>1406</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1407"></a>1407</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;We&nbsp;can't&nbsp;use&nbsp;PrintTo,&nbsp;as&nbsp;we&nbsp;do&nbsp;not&nbsp;know&nbsp;where&nbsp;Print&nbsp;is&nbsp;currently
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1408"></a>1408</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;directed
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1409"></a>1409</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;Print(CallFuncList(StringFormatted,&nbsp;args));
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1410"></a>1410</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1411"></a>1411</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1412"></a>1412</td><td></td><td></td><td></td><td><span><tt>InstallGlobalFunction(Pluralize,
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1413"></a>1413</td><td></td><td></td><td></td><td><span><tt>function(args...)
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1414"></a>1414</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;local&nbsp;nargs,&nbsp;i,&nbsp;count,&nbsp;include_num,&nbsp;str,&nbsp;len,&nbsp;out;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1415"></a>1415</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1416"></a>1416</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;#Int&nbsp;and&nbsp;one&nbsp;string
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1417"></a>1417</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;#Int&nbsp;and&nbsp;two&nbsp;strings
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1418"></a>1418</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;#One&nbsp;string
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1419"></a>1419</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;#Two&nbsp;strings
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1420"></a>1420</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1421"></a>1421</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;nargs&nbsp;:=&nbsp;Length(args);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1422"></a>1422</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;nargs&nbsp;>=&nbsp;1&nbsp;and&nbsp;IsInt(args[1])&nbsp;and&nbsp;args[1]&nbsp;>=&nbsp;0&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1423"></a>1423</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;i&nbsp;:=&nbsp;2;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1424"></a>1424</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;count&nbsp;:=&nbsp;args[1];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1425"></a>1425</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;include_num&nbsp;:=&nbsp;true;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1426"></a>1426</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1427"></a>1427</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;i&nbsp;:=&nbsp;1;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1428"></a>1428</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;include_num&nbsp;:=&nbsp;false;&nbsp;#&nbsp;if&nbsp;not&nbsp;given,&nbsp;assume&nbsp;pluralization&nbsp;is&nbsp;wanted.
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1429"></a>1429</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1430"></a>1430</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1431"></a>1431</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;not&nbsp;(nargs&nbsp;in&nbsp;[i,&nbsp;i&nbsp;+&nbsp;1]&nbsp;and
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1432"></a>1432</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IsString(args[i])&nbsp;and
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1433"></a>1433</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(nargs&nbsp;=&nbsp;i&nbsp;or&nbsp;IsString(args[i&nbsp;+&nbsp;1])))&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1434"></a>1434</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;ErrorNoReturn("Usage:&nbsp;Pluralize([&lt;count>,&nbsp;]&lt;string>[,&nbsp;&lt;plural>])");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1435"></a>1435</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1436"></a>1436</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1437"></a>1437</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;str&nbsp;:=&nbsp;args[i];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1438"></a>1438</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;len&nbsp;:=&nbsp;Length(str);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1439"></a>1439</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1440"></a>1440</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;len&nbsp;=&nbsp;0&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1441"></a>1441</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;ErrorNoReturn("the&nbsp;argument&nbsp;&lt;str>&nbsp;must&nbsp;be&nbsp;a&nbsp;non-empty&nbsp;string");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1442"></a>1442</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;elif&nbsp;include_num&nbsp;and&nbsp;count&nbsp;=&nbsp;1&nbsp;then&nbsp;#&nbsp;no&nbsp;pluralization&nbsp;needed
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1443"></a>1443</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Concatenation("\>1\&lt;&nbsp;",&nbsp;str);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1444"></a>1444</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;elif&nbsp;nargs&nbsp;=&nbsp;i&nbsp;+&nbsp;1&nbsp;then&nbsp;&nbsp;#&nbsp;pluralization&nbsp;given
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1445"></a>1445</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;:=&nbsp;args[i&nbsp;+&nbsp;1];
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1446"></a>1446</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;elif&nbsp;len&nbsp;&lt;=&nbsp;2&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1447"></a>1447</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;:=&nbsp;Concatenation(str,&nbsp;"s");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1448"></a>1448</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1449"></a>1449</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;#&nbsp;Guess&nbsp;and&nbsp;return&nbsp;the&nbsp;plural&nbsp;form&nbsp;of&nbsp;&lt;str>.
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1450"></a>1450</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;#&nbsp;Inspired&nbsp;by&nbsp;the&nbsp;"Ruby&nbsp;on&nbsp;Rails"&nbsp;inflection&nbsp;rules.
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1451"></a>1451</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1452"></a>1452</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;#&nbsp;Uncountable&nbsp;nouns
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1453"></a>1453</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;elif&nbsp;str&nbsp;in&nbsp;["equipment",&nbsp;"information"]&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1454"></a>1454</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;:=&nbsp;str;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1455"></a>1455</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1456"></a>1456</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;#&nbsp;Irregular&nbsp;plurals
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1457"></a>1457</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;elif&nbsp;str&nbsp;=&nbsp;"axis"&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1458"></a>1458</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;:=&nbsp;"axes";
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1459"></a>1459</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;elif&nbsp;str&nbsp;=&nbsp;"child"&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1460"></a>1460</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;:=&nbsp;"children";
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1461"></a>1461</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;elif&nbsp;str&nbsp;=&nbsp;"person"&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1462"></a>1462</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;:=&nbsp;"people";
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1463"></a>1463</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1464"></a>1464</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;#&nbsp;Peculiar&nbsp;endings
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1465"></a>1465</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;elif&nbsp;EndsWith(str,&nbsp;"ix")&nbsp;or&nbsp;EndsWith(str,&nbsp;"ex")&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1466"></a>1466</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;:=&nbsp;Concatenation(str{[1&nbsp;..&nbsp;len&nbsp;-&nbsp;2]},&nbsp;"ices");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1467"></a>1467</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;elif&nbsp;EndsWith(str,&nbsp;"x")&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1468"></a>1468</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;:=&nbsp;Concatenation(str,&nbsp;"es");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1469"></a>1469</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;elif&nbsp;EndsWith(str,&nbsp;"tum")&nbsp;or&nbsp;EndsWith(str,&nbsp;"ium")&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1470"></a>1470</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;:=&nbsp;Concatenation(str{[1&nbsp;..&nbsp;len&nbsp;-&nbsp;2]},&nbsp;"a");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1471"></a>1471</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;elif&nbsp;EndsWith(str,&nbsp;"sis")&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1472"></a>1472</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;:=&nbsp;Concatenation(str{[1&nbsp;..&nbsp;len&nbsp;-&nbsp;3]},&nbsp;"ses");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1473"></a>1473</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;elif&nbsp;EndsWith(str,&nbsp;"fe")&nbsp;and&nbsp;not&nbsp;EndsWith(str,&nbsp;"ffe")&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1474"></a>1474</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;:=&nbsp;Concatenation(str{[1&nbsp;..&nbsp;len&nbsp;-&nbsp;2]},&nbsp;"ves");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1475"></a>1475</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;elif&nbsp;EndsWith(str,&nbsp;"lf")&nbsp;or&nbsp;EndsWith(str,&nbsp;"rf")&nbsp;or&nbsp;EndsWith(str,&nbsp;"loaf")&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1476"></a>1476</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;:=&nbsp;Concatenation(str{[1&nbsp;..&nbsp;len&nbsp;-&nbsp;1]},&nbsp;"ves");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1477"></a>1477</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;elif&nbsp;EndsWith(str,&nbsp;"y")&nbsp;and&nbsp;not&nbsp;str[len&nbsp;-&nbsp;1]&nbsp;in&nbsp;"aeiouy"&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1478"></a>1478</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;:=&nbsp;Concatenation(str{[1&nbsp;..&nbsp;len&nbsp;-&nbsp;1]},&nbsp;"ies");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1479"></a>1479</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;elif&nbsp;str{[len&nbsp;-&nbsp;1,&nbsp;len]}&nbsp;in&nbsp;["ch",&nbsp;"ss",&nbsp;"sh"]&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1480"></a>1480</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;:=&nbsp;Concatenation(str,&nbsp;"es");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1481"></a>1481</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;elif&nbsp;EndsWith(str,&nbsp;"s")&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1482"></a>1482</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;:=&nbsp;str;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1483"></a>1483</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1484"></a>1484</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;#&nbsp;Default&nbsp;to&nbsp;appending&nbsp;'s'
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1485"></a>1485</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;else
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1486"></a>1486</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;:=&nbsp;Concatenation(str,&nbsp;"s");
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1487"></a>1487</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1488"></a>1488</td><td></td><td></td><td></td><td><span><tt>
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1489"></a>1489</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;if&nbsp;include_num&nbsp;then
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1490"></a>1490</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Concatenation("\>",&nbsp;String(args[1]),&nbsp;"\&lt;&nbsp;",&nbsp;out);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1491"></a>1491</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;fi;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1492"></a>1492</td><td></td><td></td><td></td><td><span><tt>&nbsp;&nbsp;return&nbsp;out;
</tt></span></td><td><span></span></td><td><span></span></td></tr>
<tr class='ignore'><td><a name="line1493"></a>1493</td><td></td><td></td><td></td><td><span><tt>end);
</tt></span></td><td><span></span></td><td><span></span></td></tr>
</tbody>
</table></body></html>
